# Flight rules cho Git

üåç
*[English](README.md) ‚àô [Espa√±ol](README_es.md)  ‚àô  [–†—É—Å—Å–∫–∏–π](README_ru.md) ‚àô [ÁÆÄ‰Ωì‰∏≠Êñá](README_zh-CN.md)‚àô [ÌïúÍµ≠Ïñ¥](README_kr.md)*

#### "flight rules" l√† g√¨?

M·ªôt [h∆∞·ªõng d·∫´n cho c√°c phi h√†nh gia astronauts](https://www.jsc.nasa.gov/news/columbia/fr_generic.pdf) (c√°c l·∫≠p tr√¨nh vi√™n s·ª≠ d·ª•ng Git) v·ªÅ nh·ªØng vi·ªác c·∫ßn l√†m khi m·ªôt th·ª© g√¨ ƒë√≥ x·∫£y ra sai.

>  *Flight Rules* l√† ki·∫øn th·ª©c kh√≥ th·∫•y ƒë∆∞·ª£c trong c√°c h∆∞·ªõng d·∫´n s·ª≠ d·ª•ng, t·ª´ng b∆∞·ªõc, ph·∫£i l√†m g√¨ ƒë·∫øu ƒëi·ªÅu X x·∫£y ra v√† t·∫°i sao. V·ªÅ c∆° b·∫£n, ch√∫ng l√† c√°c quy tr√¨nh th·ª±c hi·ªán theo ti√™u chu·∫©n c·ª• th·ªÉ cho t·ª´ng k·ªãch b·∫£n c·ª• th·ªÉ. [...]

> NASA ƒë√£ n·∫Øm b·∫Øt ƒë∆∞·ª£c nh·ªØng sai l·∫ßm, th·∫£m ho·∫° v√† gi·∫£i ph√°p c·ªßa ch√∫ng t√¥i k·ªÉ t·ª´ ƒë·∫ßu nh·ªØng nƒÉm 1960s, khi c√°c nh√≥m Mercury-era b·∫Øt ƒë·∫ßu thu th·∫≠p "c√°c b√†i h·ªçc kinh nghi·ªám" th√†nh m·ªôt b·∫£n t√≥m t·∫Øt li·ªát k√™ h√†ng ngh√¨n t√¨nh hu·ªëng c√≥ v·∫•n ƒë·ªÅ, t·ª´ l·ªói ƒë·ªông c∆° ƒë·∫øn c√°c tay c·∫ßm b·ªã b·∫ª cong ƒë·∫øn tr·ª•c tr·∫∑c m√°y t√≠nh v√† c√°c gi·∫£i ph√°p c·ªßa h·ªç.

&mdash; Chris Hadfield, *An Astronaut's Guide to Life*.

#### Conventions for this document

V√¨ ƒë·ªÉ r√µ r√†ng n√™n t·∫•t c·∫£ c√°c v√≠ d·ª• trong t√†i li·ªáu n√†y s·ª≠ d·ª•ng th√™m d·∫•u bash prompt ƒë∆∞·ª£c tu·ª≥ ch·ªânh ƒë·ªÉ ch·ªâ ra nh√°nh hi·ªán t·∫°i v√† c√≥ ho·∫∑c kh√¥ng s·ª± thay ƒë·ªïi giai ƒëo·∫°n. Nh√°nh ƒë∆∞·ª£c ƒë·∫∑t trong d·∫•u ngo·∫∑c ƒë∆°n v√†  The branch is enclosed in parentheses, and m·ªôt k√Ω t·ª± `*` b√™n c·∫°nh t√™n nh√°nh cho bi·∫øt c√°c thay ƒë·ªïi c·ªßa giai ƒëo·∫°n.

T·∫•t c·∫£ c√°c command n√™n l√†m vi·ªác v·ªõi phi√™n b·∫£n nh·ªè nh·∫•t 2.13.0. Xem [git website](https://www.git-scm.com/) ƒë·ªÉ c·∫≠p nh·∫≠t phi√™n b·∫£n git tr√™n local c·ªßa b·∫°n.

[![Join the chat at https://gitter.im/k88hudson/git-flight-rules](https://badges.gitter.im/Join%20Chat.svg)](https://gitter.im/k88hudson/git-flight-rules?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Danh m·ª•c n·ªôi dung**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*

  - [Repositories](#repositories)
    - [I want to start a local repository](#i-want-to-start-a-local-repository)
    - [I want to clone a remote repository](#i-want-to-clone-a-remote-repository)
  - [Editing Commits](#editing-commits)
    - [What did I just commit?](#what-did-i-just-commit)
    - [I wrote the wrong thing in a commit message](#i-wrote-the-wrong-thing-in-a-commit-message)
    - [I committed with the wrong name and email configured](#i-committed-with-the-wrong-name-and-email-configured)
    - [I want to remove a file from the previous commit](#i-want-to-remove-a-file-from-the-previous-commit)
    - [I want to delete or remove my last commit](#i-want-to-delete-or-remove-my-last-commit)
    - [Delete/remove arbitrary commit](#deleteremove-arbitrary-commit)
    - [I tried to push my amended commit to a remote, but I got an error message](#i-tried-to-push-my-amended-commit-to-a-remote-but-i-got-an-error-message)
    - [I accidentally did a hard reset, and I want my changes back](#i-accidentally-did-a-hard-reset-and-i-want-my-changes-back)
    - [I accidentally committed and pushed a merge](#i-accidentally-committed-and-pushed-a-merge)
    - [I accidentally committed and pushed files containing sensitive data](#i-accidentally-committed-and-pushed-files-containing-sensitive-data)
  - [Staging](#staging)
    - [I need to add staged changes to the previous commit](#i-need-to-add-staged-changes-to-the-previous-commit)
    - [I want to stage part of a new file, but not the whole file](#i-want-to-stage-part-of-a-new-file-but-not-the-whole-file)
    - [I want to add changes in one file to two different commits](#i-want-to-add-changes-in-one-file-to-two-different-commits)
    - [I want to stage my unstaged edits, and unstage my staged edits](#i-want-to-stage-my-unstaged-edits-and-unstage-my-staged-edits)
  - [Unstaged Edits](#unstaged-edits)
    - [I want to move my unstaged edits to a new branch](#i-want-to-move-my-unstaged-edits-to-a-new-branch)
    - [I want to move my unstaged edits to a different, existing branch](#i-want-to-move-my-unstaged-edits-to-a-different-existing-branch)
    - [I want to discard my local uncommitted changes (staged and unstaged)](#i-want-to-discard-my-local-uncommitted-changes-staged-and-unstaged)
    - [I want to discard specific unstaged changes](#i-want-to-discard-specific-unstaged-changes)
    - [I want to discard specific unstaged files](#i-want-to-discard-specific-unstaged-files)
    - [I want to discard only my unstaged local changes](#i-want-to-discard-only-my-unstaged-local-changes)
    - [I want to discard all of my untracked files](#i-want-to-discard-all-of-my-untracked-files)
    - [I want to unstage a specific staged file](#i-want-to-unstage-a-specific-staged-file)
  - [Branches](#branches)
    - [I want to list all branches](#i-want-to-list-all-branches)
    - [Create a branch from a commit](#create-a-branch-from-a-commit)
    - [I pulled from/into the wrong branch](#i-pulled-frominto-the-wrong-branch)
    - [I want to discard local commits so my branch is the same as one on the server](#i-want-to-discard-local-commits-so-my-branch-is-the-same-as-one-on-the-server)
    - [I committed to master instead of a new branch](#i-committed-to-master-instead-of-a-new-branch)
    - [I want to keep the whole file from another ref-ish](#i-want-to-keep-the-whole-file-from-another-ref-ish)
    - [I made several commits on a single branch that should be on different branches](#i-made-several-commits-on-a-single-branch-that-should-be-on-different-branches)
    - [I want to delete local branches that were deleted upstream](#i-want-to-delete-local-branches-that-were-deleted-upstream)
    - [I accidentally deleted my branch](#i-accidentally-deleted-my-branch)
    - [I want to delete a branch](#i-want-to-delete-a-branch)
    - [I want to delete multiple branches](#i-want-to-delete-multiple-branches)
    - [I want to rename a branch](#i-want-to-rename-a-branch)
    - [I want to checkout to a remote branch that someone else is working on](#i-want-to-checkout-to-a-remote-branch-that-someone-else-is-working-on)
    - [I want to create a new remote branch from current local one](#i-want-to-create-a-new-remote-branch-from-current-local-one)
    - [I want to set a remote branch as the upstream for a local branch](#i-want-to-set-a-remote-branch-as-the-upstream-for-a-local-branch)
    - [I want to set my HEAD to track the default remote branch](#i-want-to-set-my-head-to-track-the-default-remote-branch)
    - [I made changes on the wrong branch](#i-made-changes-on-the-wrong-branch)
  - [Rebasing and Merging](#rebasing-and-merging)
    - [I want to undo rebase/merge](#i-want-to-undo-rebasemerge)
    - [I rebased, but I don't want to force push](#i-rebased-but-i-dont-want-to-force-push)
    - [I need to combine commits](#i-need-to-combine-commits)
      - [Safe merging strategy](#safe-merging-strategy)
      - [I need to merge a branch into a single commit](#i-need-to-merge-a-branch-into-a-single-commit)
      - [I want to combine only unpushed commits](#i-want-to-combine-only-unpushed-commits)
      - [I need to abort the merge](#i-need-to-abort-the-merge)
    - [I need to update the parent commit of my branch](#i-need-to-update-the-parent-commit-of-my-branch)
    - [Check if all commits on a branch are merged](#check-if-all-commits-on-a-branch-are-merged)
    - [Possible issues with interactive rebases](#possible-issues-with-interactive-rebases)
      - [The rebase editing screen says 'noop'](#the-rebase-editing-screen-says-noop)
      - [There were conflicts](#there-were-conflicts)
  - [Stash](#stash)
    - [Stash all edits](#stash-all-edits)
    - [Stash specific files](#stash-specific-files)
    - [Stash with message](#stash-with-message)
    - [Apply a specific stash from list](#apply-a-specific-stash-from-list)
  - [Finding](#finding)
    - [I want to find a string in any commit](#i-want-to-find-a-string-in-any-commit)
    - [I want to find by author/committer](#i-want-to-find-by-authorcommitter)
    - [I want to list commits containing specific files](#i-want-to-list-commits-containing-specific-files)
    - [Find a tag where a commit is referenced](#find-a-tag-where-a-commit-is-referenced)
  - [Submodules](#submodules)
    - [Clone all submodules](#clone-all-submodules)
    - [Remove a submodule](#remove-a-submodule)
  - [Miscellaneous Objects](#miscellaneous-objects)
    - [Restore a deleted file](#restore-a-deleted-file)
    - [Delete tag](#delete-tag)
    - [Recover a deleted tag](#recover-a-deleted-tag)
    - [Deleted Patch](#deleted-patch)
    - [Exporting a repository as a Zip file](#exporting-a-repository-as-a-zip-file)
    - [Push a branch and a tag that have the same name](#push-a-branch-and-a-tag-that-have-the-same-name)
  - [Tracking Files](#tracking-files)
    - [I want to change a file name's capitalization, without changing the contents of the file](#i-want-to-change-a-file-names-capitalization-without-changing-the-contents-of-the-file)
    - [I want to overwrite local files when doing a git pull](#i-want-to-overwrite-local-files-when-doing-a-git-pull)
    - [I want to remove a file from Git but keep the file](#i-want-to-remove-a-file-from-git-but-keep-the-file)
    - [I want to revert a file to a specific revision](#i-want-to-revert-a-file-to-a-specific-revision)
    - [I want to list changes of a specific file between commits or branches](#i-want-to-list-changes-of-a-specific-file-between-commits-or-branches)
    - [I want Git to ignore changes to a specific file](#i-want-git-to-ignore-changes-to-a-specific-file)
  - [Configuration](#configuration)
    - [I want to add aliases for some Git commands](#i-want-to-add-aliases-for-some-git-commands)
    - [I want to add an empty directory to my repository](#i-want-to-add-an-empty-directory-to-my-repository)
    - [I want to cache a username and password for a repository](#i-want-to-cache-a-username-and-password-for-a-repository)
    - [I want to make Git ignore permissions and filemode changes](#i-want-to-make-git-ignore-permissions-and-filemode-changes)
    - [I want to set a global user](#i-want-to-set-a-global-user)
    - [I want to add command line coloring for Git](#i-want-to-add-command-line-coloring-for-git)
  - [I've no idea what I did wrong](#ive-no-idea-what-i-did-wrong)
- [Other Resources](#other-resources)
  - [Books](#books)
  - [Tutorials](#tutorials)
  - [Scripts and Tools](#scripts-and-tools)
  - [GUI Clients](#gui-clients)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## Repositories

### T√¥i mu·ªën b·∫Øt ƒë·∫ßu m·ªôt repository tr√™n local

ƒê·ªÉ kh·ªüi t·∫°o cho m·ªôt Git repository tr√™n th∆∞ m·ª•c ƒë√£ t·ªìn t·∫°i:

```sh
(my-folder) $ git init
```

### T√¥i mu·ªën clone m·ªôt remote repository

ƒê·ªÉ clone (copy) m·ªôt remote repository, copy ƒë∆∞·ªùng d·∫´n url cho repository, v√† ch·∫°y:

```sh
$ git clone [url]
```

Vi·ªác n√†y s·∫Ω l∆∞u l·∫°i n√≥ v√†o m·ªôt th∆∞ m·ª•c c√≥ t√™n nh∆∞ t√™n c·ªßa remote repository. H√£y ch·∫Øc ch·∫Øn r·∫±ng b·∫°n c√≥ k·∫øt n·ªëi ƒë·∫øn remote server khi b·∫°n ƒëang clone v·ªÅ (h·∫ßu h·∫øt c√°c c√°c vi·ªác n√†y c·∫ßn ƒë·∫£m b·∫£o b·∫°n ƒë∆∞·ª£c k·∫øt n·ªëi v·ªõi internet).

ƒê·ªÉ clone v√†o m·ªôt th∆∞ m·ª±c v·ªõi t√™n kh√°c v·ªõi t√™n m·∫∑c ƒë·ªãnh c·ªßa repository:

```sh
$ git clone [url] name-of-new-folder
```

## Ch·ªânh s·ª≠a Commit

<a name="diff-last"></a>
### B·∫°n v·ª´a commit ƒëi·ªÅu g√¨ ?

Gi·∫£ s·ª≠ b·∫°n v·ª´a commit thay ƒë·ªïi m·ªôt c√°ch m√π qu√°ng v·ªõi l·ªánh `git commit -a` v√† b·∫°n kh√¥ng ch·∫Øc ch·∫Øn n·ªôi dunng th·ª±c s·ª± l√† c·ªßa commit v·ª´a th·ª±c hi·ªán. B·∫°n c√≥ th·ªÉ hi·ªÉn th·ªã ra commit g·∫ßn nh·∫•t tr√™n con tr·ªè HEAD hi·ªán t·∫°i c·ªßa b·∫°n v·ªõi l·ªánh:

```sh
(master)$ git show
```

Ho·∫∑c

```sh
$ git log -n1 -p
```

N·∫øu b·∫°n mu·ªën xem m·ªôt file t·∫°i m·ªôt commit c·ª• th·ªÉ, b·∫°n c√≥ th·ªÉ c≈©ng c√≥ th·ªÉ l√†m ƒë∆∞·ª£c ƒëi·ªÅu n√†y ( `<commitid>`  l√† commit m√† b·∫°n quan t√¢m):

```sh
$ git show <commitid>:filename
```

### T√¥i ƒë√£ vi·∫øt sai v√†i th·ª© trong message c·ªßa commit

N·∫øu b·∫°n ƒë√£ vi·∫øt sai th·ª© g√¨ ƒë√≥ v√† commit ch∆∞a ƒë∆∞·ª£c push l√™n, b·∫°n c√≥ th·ªÉ l√†m theo c√°ch sau ƒë·ªÉ thay ƒë·ªïi message c·ªßa commit m√† kh√¥ng l√†m thay ƒë·ªïi commit:

```sh
$ git commit --amend --only
```
C√¢u l·ªánh ƒë√≥ s·∫Ω m·ªü tr√¨nh so·∫°n th·∫£o m·∫∑c ƒë·ªãnh c·ªßa b·∫°n, n∆°i b·∫°n c√≥ th·ªÉ ch·ªânh s·ª≠a message. This will open your default text editor, where you can edit the message. Ngo√†i ra, b·∫°n c√≥ th·ªÉ l√†m t·∫•t c·∫£ ƒëi·ªÅu n√†y v·ªõi m·ªôt c√¢u l·ªánh sau:

```sh
$ git commit --amend --only -m 'xxxxxxx'
```

N·∫øu b·∫°n ƒë√£ ƒë·∫©y message l√™n, b·∫°n c√≥ th·ªÉ ch·ªânh s·ª≠a commit v√† force push, nh∆∞ng ƒëi·ªÅu ƒë√≥ kh√¥ng ƒë∆∞·ª£c khuy·∫øn kh√≠ch.

<a name="commit-wrong-author"></a>
### T√¥i ƒë√£ commit v·ªõi t√™n v√† email c·∫•u h√¨nh sai

N·∫øu ƒë√≥ l√† m·ªôt commit ƒë·ªôc l·∫≠p, ch·ªânh s·ª≠a n√≥:

```sh
$ git commit --amend --no-edit --author "T√™n t√°c gi·∫£ m·ªõi <authoremail@mydomain.com>"
```

M·ªôt c√°ch kh√°c ƒë·ªÉ c·∫•u h√¨nh ƒë√∫ng t√°c gi·∫£ l√† c√†i ƒë·∫∑t trong `git config --global author.(name|email)` v√† sau ƒë√≥ s·ª≠ d·ª•ng

```sh
$ git commit --amend --reset-author --no-edit
```

N·∫øu b·∫°n c·∫ßn thay ƒë·ªïi t·∫•t c·∫£ l·ªãch s·ª≠, h√£y xem trang ƒë√≥ v·ªõi `git filter-branch`.

### T√¥i mu·ªën xo√° m·ªôt file t·ª´ commit tr∆∞·ªõc

ƒê·ªÉ xo√° c√°c thay ƒë·ªïi ƒë·ªëi v·ªõi m·ªôt file kh·ªèi commit tr∆∞·ªõc ƒë√≥, h√£y l√†m nh∆∞ sau:

```sh
$ git checkout HEAD^ myfile
$ git add myfile
$ git commit --amend --no-edit
```

Trong tr∆∞·ªùng h·ª£p file m·ªõi ƒë∆∞·ª£c th√™m v√†o commit v√† b·∫°n mu·ªën xo√° n√≥ (t·ª´ Git), h√£y th·ª±c hi·ªán:

```sh
$ git rm --cached myfile
$ git commit --amend --no-edit
```

ƒêi·ªÅu n√†y ƒëƒÉc bi·ªát h·ªØu √≠ch khi b·∫°n c√≥ m·ªôt b·∫£n patch m·ªü v√† b·∫°n ƒë√£ commit m·ªôt file kh√¥ng c·∫ßn thi·∫øt v√† force push ƒë·ªÉ c·∫≠p nh·∫≠t b·∫£n patch tr√™n remote. Tu·ª≥ ch·ªçn `--no-edit` ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ gi·ªØ message cho commit hi·ªán t·∫°i.

<a name="delete-pushed-commit"></a>
### T√¥i mu·ªën xo√° ho·∫∑c lo·∫°i b·ªè commit cu·ªëi c√πng nh·∫•t c·ªßa t√¥i

N·∫øu b·∫°n mu·ªën xo√° c√°c commit ƒë√£ push, b·∫°n c√≥ th·ªÉ d·ª•ng c√°ch sau. Tuy nhi√™n, n√≥ s·∫Ω kh√¥ng th·ªÉ ph·ª•c h·ªìi thay ƒë·ªïi c·ªßa l·ªãch s·ª≠, v√† l√†m h·ªèng l·ªãch s·ª≠ c·ªßa b·∫•t k·ª≥ ai kh√°c ƒë√£ pull t·ª´ repository. T√≥m l·∫°i, n·∫øu b·∫°n kh√¥ng ch·∫Øc ch·∫Øn, b·∫°n kh√¥ng n√™n l√†m ƒëi·ªÅu n√†y.

```sh
$ git reset HEAD^ --hard
$ git push --force-with-lease [remote] [branch]
```

N·∫øu b·∫°n ch∆∞a push, ƒë·ªÉ reset Git v·ªÅ tr·∫°ng th√°i tr∆∞·ªõc khi b·∫°n th·ª±c hi·ªán commit cu·ªëi (trong khi v√£n gi·ªØ c√°c thay ƒë·ªïi c·ªßa giai ƒëo·∫°n) s·ª≠ d·ª•ng:

```
(my-branch*)$ git reset --soft HEAD@{1}

```

ƒêi·ªÅu n√†y ch·ªâ ho·∫°t ƒë·ªông n·∫øu b·∫°n ch∆∞a push. N·∫øu b·∫°n ƒë√£ push, ƒëi·ªÅu th·ª±c s·ª± an to√†n nh·∫•t c·∫ßn l√†m l√† `git revert SHAofBadCommit`. ƒêi·ªÅu ƒë√≥ s·∫Ω t·∫°o m·ªôt commit m·ªõi ƒë·ªÉ quay tr·ªü l·∫°i thay ƒë·ªïi c·ªßa commit tr∆∞·ªõc ƒë√≥. Ho·∫∑c n·∫øu nh√°nh b·∫°n ƒë√£ push l√† rebase-safe (c√°c dev kh√°c kh√¥ng ƒë·ªãnh pull t·ª´ n√≥ v·ªÅ), b·∫°n ch·ªâ c√≥ th·ªÉ s·ª≠ d·ª•ng `git push --force-with-lease`. ƒê·ªÉ bi·∫øt th√™m, h√£y xem [ph·∫ßn tr√™n](#deleteremove-last-pushed-commit).

<a name="delete-any-commit"></a>
### Xo√°/lo·∫°i b·ªè commit tu·ª≥ √Ω

L∆∞u √Ω nh∆∞ tr√™n. Kh√¥ng bao gi·ªù l√†m ƒëi·ªÅu n√†y n·∫øu c√≥ th·ªÉ.

```sh
$ git rebase --onto SHA1_OF_BAD_COMMIT^ SHA1_OF_BAD_COMMIT
$ git push --force-with-lease [remote] [branch]
```

Ho·∫∑c th·ª±c hi·ªán m·ªôt [interactive rebase](#interactive-rebase) v√† lo·∫°i b·ªè c√°c d√≤ng t∆∞∆°ng ·ª©ng cho c√°c commit b·∫°n mu·ªën lo·∫°i b·ªè.

<a name="#force-push"></a>
### T√¥i ƒë√£ c·ªë g·∫Øng push commit ƒë√£ s·ª≠ ƒë·ªïi l√™n remote, nh∆∞ng t g·∫∑p m·ªôt th√¥ng b√°o l·ªói

```sh
To https://github.com/yourusername/repo.git
! [rejected]        mybranch -> mybranch (non-fast-forward)
error: failed to push some refs to 'https://github.com/tanay1337/webmaker.org.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
```

L∆∞u √Ω r·∫±ng, nh∆∞ v·ªõi rebase (xem b√™n d∆∞·ªõi), s·ª≠ ƒë·ªïi thay th·ªÉ commit c≈© v·ªõi m·ªôt commit m·ªõi, n√™n b·∫°n ph·∫£i force push (`--force-with-lease`) thay ƒë·ªïi c·ªßa b·∫°n n·∫øu b·∫°n ƒë√£ push commit ƒë√£ s·ª≠a ƒë·ªïi tr∆∞·ª£c l√™n remote c·ªßa b·∫°n. H√£y c·∫©n th·∫≠n khi b·∫°n l√†m ƒëi·ªÅu n√†y &ndash; *lu√¥n lu√¥n* ƒë·∫£m b·∫£o r·∫±ng b·∫°n ƒë√£ ch·ªâ ƒë·ªãnh m·ªôt nh√°nh!

```sh
(my-branch)$ git push origin mybranch --force-with-lease
```

N√≥i chung, **tr√°nh force push**. T·ªët nh·∫•t l√† t·∫°o v√† push m·ªôt commit m·ªõi thay v√¨ force-push commit ƒë√£ s·ª≠a ƒë·ªïi v√¨ n√≥ s·∫Ω g√¢y xung ƒë·ªôt trong l·ªãch s·ª≠ c·ªßa resource cho b·∫•t k·ª≥ developer n√†o ng∆∞·ªùi m√† ƒë√£ t∆∞∆°ng t√°c v·ªõi nh√°nh ƒë∆∞·ª£c ƒë·ªÅ c·∫≠p ho·∫∑c b·∫•t k·ª≥ nh√°nh con n√†o. `--force-with-lease` s·∫Ω v·∫´n th·∫•t b·∫°i, n·∫øu ai ƒë√≥ c≈©ng ƒëang l√†m vi·ªác tr√™n c√πng m·ªôt nh√°nh v·ªõi b·∫°n, v√† vi·ªác push l√™n s·∫Ω ghi ƒë√® l√™n nh·ªØng thay ƒë·ªïi ƒë√≥.

N·∫øu b·∫°n ho√†n to√†n ch·∫Øc ch·∫Øn r·∫±ng kh√¥ng ai ƒëang l√†m vi·ªác tr√™n c√πng m·ªôt nh√°nh ho·∫∑c b·∫°n mu·ªën c·∫≠p nh·∫≠t ph·∫ßn ƒë·∫ßu c·ªßa m·ªôt nh√°nh *v√¥ ƒëi·ªÅu ki·ªán*, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng `--force` (`-f`), nh∆∞ng ƒëi·ªÅu n√†y n√≥i chung n√™n tr√°nh.

<a href="undo-git-reset-hard"></a>
### T√¥i ƒë√£ v√¥ t√¨nh kh√¥i ph·ª•c c√†i ƒë·∫∑t g·ªëc, v√† t·ªëi mu·ªën thay ƒë·ªïi c·ªßa t√¥i tr·ªü l·∫°i tr∆∞·ªõc ƒë√≥.

N·∫øu v√¥ t√¨nh b·∫°n th·ª±c hi·ªán `git reset --hard`, b·∫°n c√≥ th·ªÉ v·∫´n nh·∫≠n ƒë∆∞·ª£c commit tr∆∞·ªõc c·ªßa b·∫°n, v√¨ git gi·ªØ m·ªôt b·∫£n log cho t·∫•t c·∫£ m·ªçi th·ª© trong 1 v√†i ng√†y.

Ch√∫ √Ω: ƒêi·ªÅu n√†y ch·ªâ h·ª£p l·ªá n·∫øu lu·ªìng l√†m vi·ªác c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c sao l∆∞u, t·ª©c l√† ƒë∆∞·ª£c commit ho·∫∑c ƒë∆∞·ª£c stash. `git reset --hard` _s·∫Ω lo·∫°i b·ªè_ c√°c thay ƒë·ªïi kh√¥ng ƒë∆∞·ª£c commit, v√¨ v·∫≠y h√£y s·ª≠ d·ª•ng n√≥ m·ªôt c√°ch th·∫≠n tr·ªçng. (M·ªôt tu·ª≥ ch·ªçn an to√†n l√† `git reset --keep`.)

```sh
(master)$ git reflog
```

B·∫°n s·∫Ω th·∫•y danh s√°ch c√°c commit g·∫ßn ƒë√¢y, v√† m·ªôt commit cho reset. Ch·ªçn SHA c·ªßa commit v√† mu·ªën quay tr·ªü l·∫°i v√† reset l·∫°i:

```sh
(master)$ git reset --hard SHA1234
```

V√† b·∫°n n√™n t·ªët h∆°n ƒë·ªÉ ƒëi ti·∫øp.

<a href="undo-a-commit-merge"></a>
### T√¥i v√¥ t√¨nh commit v√† ƒë·∫©y l√™n m·ªôt merge

N·∫øu b·∫°n v√¥ t√¨nh merge m·ªôt nh√°nh t√≠nh nƒÉng v√†o nh√°nh ph√°t tri·ªÉn ch√≠nh tr∆∞·ªõc khi n√≥ s·∫µn s√†ng ƒë·ªÉ merge, b·∫°n v·∫´n c√≥ th·ªÉ undo merge. Nh∆∞ng c√≥ m·ªôt ƒëi·ªÉm ph·∫£i n·∫Øm ƒë∆∞·ª£c: M·ªôt commit merge c√≥ m·ªôt ho·∫∑c nhi·ªÅu h∆°n m·ªôt parent (th∆∞·ªùng l√† 2).

C√¢u l·ªánh ƒë·ªÉ s·ª≠ d·ª•ng:
```sh
(feature-branch)$ git revert -m 1 <commit>
```
Ch·ªó tu·ª≥ ch·ªçn -m 1 cho bi·∫øt s·ªë parent l√† 1 (nh√°nh m√† merge ƒë∆∞·ª£c th·ª±c hi·ªán) l√†m parent ƒë·ªÉ revert.

Ch√∫ √Ω: S·ªë parent kh√¥ng ph·∫£i l√† s·ªë ƒë·ªÉ x√°c ƒë·ªãnh commit. Thay v√†o ƒë√≥, m·ªôt commit merge c√≥ m·ªôt d√≤ng `Merge: 8e2ce2d 86ac2e7`. S·ªë parent l√† m·ªôt index tr√™n 1 c·ªßa m·ªôt parent tr√™n d√≤ng n√†y, s·ªë nh·∫≠n d·∫°ng ƒë·∫ßu ti√™n l√† 1, th·ª© 2 l√† s·ªë 2 v√† ti·∫øp t·ª•c.

<a href="undo-sensitive-commit-push"></a>
### T√¥i v√¥ t√¨nh commit v√† ƒë·∫©y c√°c file ch·ª©a c√°c d·ªØ li·ªáu nh·∫£y c·∫£m

N·∫øu b·∫°n v√¥ t√¨nh push l√™n c√°c file ch·ª©a d·ªØ li·ªáu nh·∫°y c·∫£m (passwords, keys, etc.), b·∫°n c√≥ th·ªÉ s·ª≠a ƒë·ªïi commit tr∆∞·ªõc.. L∆∞u √Ω r·∫±ng khi b·∫°n ƒë√£ ƒë·∫©y m·ªôt commit, b·∫°n n√™n xem x√©t b·∫•t k·ª≥ d·ªØ li·ªáu n√†o n√≥ ch·ª©a d·ªØ li·ªáu ƒë·ªÉ b·ªã x√¢m nh·∫≠p. C√°c b∆∞·ªõc n√†y c√≥ th·ªÉ xo√° d·ªØ li·ªáu nh·∫°y c·∫£m t·ª´ repo public ho·∫∑c b·∫£n sao c·ª•c b·ªô c·ªßa repository, nh∆∞ng b·∫°n kh√¥ng th·ªÉ x√≥a d·ªØ li·ªáu nh·∫°y c·∫£m kh·ªèi c√°c b·∫£n sao ƒë∆∞·ª£c k√©o v·ªÅ c·ªßa ng∆∞·ªùi kh√°c. N·∫øu b·∫°n ƒë√£ commit m·∫≠t kh·∫©u, h√£y thay ƒë·ªïi m·∫≠t kh·∫©u ngay l·∫≠p t·ª©c. N·∫øu b·∫°n ƒë√£ commit m·ªôt key, h√£y t·∫°o l·∫°i key ƒë√≥ ngay l·∫≠p t·ª©c. Vi·ªác s·ª≠a ƒë·ªïi commit ƒë√£ ƒë·∫©y l√† kh√¥ng ƒë·ªß, v√¨ b·∫•t k·ª≥ ai c≈©ng c√≥ th·ªÉ ƒë√£ pull commit ban ƒë·∫ßu ch·ª©a d·ªØ li·ªáu nh·∫°y c·∫£m c·ªßa b·∫°n trong th·ªùi gian ch·ªù ƒë·ª£i. Vi·ªác s·ª≠a ƒë·ªïi commit ƒë√£ ƒë·∫©y l√† kh√¥ng ƒë·ªß, v√¨ b·∫•t k·ª≥ ai c≈©ng c√≥ th·ªÉ ƒë√£ k√©o cam k·∫øt ban ƒë·∫ßu ch·ª©a d·ªØ li·ªáu nh·∫°y c·∫£m c·ªßa b·∫°n trong th·ªùi gian ch·ªù ƒë·ª£i.

N·∫øu b·∫°n ch·ªânh s·ª≠a t·ªáp v√† x√≥a d·ªØ li·ªáu nh·∫°y c·∫£m, h√£y ch·∫°y
```sh
(feature-branch)$ git add edited_file
(feature-branch)$ git commit --amend --no-edit
(feature-branch)$ git push --force-with-lease origin [branch]
```

N·∫øu b·∫°n mu·ªën x√≥a to√†n b·ªô t·ªáp (nh∆∞ng gi·ªØ nguy√™n t·ªáp c·ª•c b·ªô), h√£y ch·∫°y
```sh
(feature-branch)$ git rm --cached sensitive_file
echo sensitive_file >> .gitignore
(feature-branch)$ git add .gitignore
(feature-branch)$ git commit --amend --no-edit
(feature-branch)$ git push --force-with-lease origin [branch]
```
Ngo√†i ra, l∆∞u tr·ªØ d·ªØ li·ªáu nh·∫°y c·∫£m c·ªßa b·∫°n trong c√°c bi·∫øn m√¥i tr∆∞·ªùng c·ª•c b·ªô.

N·∫øu b·∫°n mu·ªën x√≥a ho√†n to√†n to√†n b·ªô t·ªáp (v√† kh√¥ng gi·ªØ nguy√™n t·ªáp c·ª•c b·ªô), sau ƒë√≥ ch·∫°y

```sh
(feature-branch)$ git rm sensitive_file
(feature-branch)$ git commit --amend --no-edit
(feature-branch)$ git push --force-with-lease origin [branch]
```

N·∫øu b·∫°n ƒë√£ th·ª±c hi·ªán c√°c commit kh√°c trong th·ªùi gian ch·ªù ƒë·ª£i (t·ª©c l√† d·ªØ li·ªáu nh·∫°y c·∫£m n·∫±m trong commit tr∆∞·ªõc commit tr∆∞·ªõc ƒë√≥), b·∫°n s·∫Ω ph·∫£i rebase.

## Staging

<a href="#i-need-to-add-staged-changes-to-the-previous-commit"></a>
### T√¥i c·∫ßn th√™m c√°c thay ƒë·ªïi ƒë√£ stage cho commit tr∆∞·ªõc ƒë√≥

```sh
(my-branch*)$ git commit --amend
```

N·∫øu b·∫°n ƒë√£ bi·∫øt b·∫°n kh√¥ng mu·ªën thay ƒë·ªïi message commit, b·∫°n c√≥ th·ªÉ y√™u c·∫ßu git s·ª≠ d·ª•ng l·∫°i commit message:

```sh
(my-branch*)$ git commit --amend -C HEAD
```


<a name="commit-partial-new-file"></a>
### T√¥i mu·ªën stage m·ªôt ph·∫ßn c·ªßa m·ªôt file m·ªõi, nh∆∞ng kh√¥ng ph·∫£i to√†n b·ªô file

Th√¥ng th∆∞·ªùng, n·∫øu b·∫°n mu·ªën stage m·ªôt ph·∫ßn c·ªßa m·ªôt file, b·∫°n ch·∫°y ƒëi·ªÅu n√†y:

```sh
$ git add --patch filename.x
```

`-p` s·∫Ω ho·∫°t ƒë·ªông trong ng·∫Øn h·∫°n. Vi·ªác n√†y s·∫Ω m·ªü ch·∫ø ƒë·ªô interactive. B·∫°n s·∫Ω c√≥ th·ªÉ s·ª≠ d·ª•ng tu·ª≥ ch·ªçn `s` ƒë·ªÉ c·∫Øt commit - tuy nhi√™n, n·∫øu l√† file m·ªõi, b·∫°n s·∫Ω kh√¥ng c√≥ tu·ª≥ ch·ªçn n√†y. ƒê·ªÉ th√™m m·ªôt file m·ªõi, l√†m nh∆∞ sau:

```sh
$ git add -N filename.x
```

Sau ƒë√≥, b·∫°n s·∫Ω c·∫ßn s·ª≠ d·ª•ng tu·ª≥ ch·ªçn `e` ƒë·ªÉ d√πng c√°ch th·ªß c√¥ng th√™m d√≤ng. ƒêang ch·∫°y `git diff --cached` ho·∫∑c
`git diff --staged` s·∫Ω cho b·∫°n th·∫•y nh·ªØng d√≤ng b·∫°n ƒë√£ stage so v·ªõi nh·ªØng d√≤ng v·∫´n l∆∞u ·ªü c·ª•c b·ªô.

<a href="stage-in-two-commits"></a>
### T√¥i mu·ªën th√™m c√°c thay ƒë·ªïi trong m·ªôt file v√†o 2 commit kh√°c nhau

`git add` s·∫Ω th√™m to√†n b·ªô file v√†o m·ªôt commit. `git add -p` s·∫Ω cho ph√©p t∆∞∆°ng t√°c ch·ªçn nh·ªØng thay ƒë·ªïi b·∫°n mu·ªën th√™m.

<a href="unstaging-edits-and-staging-the-unstaged"></a>
### T√¥i mu·ªën stage c√°c ch·ªânh s·ª≠ ch∆∞a ƒë∆∞·ª£c stage, v√† unstage my staged edits

ƒêi·ªÅu n√†y l√† kh√≥ khƒÉn. C√°ch t·ªët nh·∫•t l√† b·∫°n n√™n stash c√°c ch·ªânh s·ª≠a ch∆∞a stage. Sau ƒë√≥, reset. Sau ƒë√≥m h√£y pop l·∫°i c√°c ch·ªânh s·ª≠a ƒë√£ stash v√† th√™m ch√∫ng.

```sh
$ git stash -k
$ git reset --hard
$ git stash pop
$ git add -A
```

## Unstaged Edits

<a href="move-unstaged-edits-to-new-branch"></a>
### T√¥i mu·ªën di chuy·ªÉn c√°c ch·ªânh s·ª≠a ch∆∞a ƒë∆∞·ª£c staged ƒë·∫øn m·ªôt nh√°nh m·ªõi

```sh
$ git checkout -b my-branch
```

<a href="move-unstaged-edits-to-old-branch"></a>
### T√¥i mu·ªën di chuy·ªÉn c√°c ch·ªânh s·ª≠a ch∆∞a stage c·ªßa t√¥i ƒë·∫øn m·ªôt nh√°nh kh√°c ƒë√£ t·ªìn t·∫°i

```sh
$ git stash
$ git checkout my-branch
$ git stash pop
```

<a href="i-want-to-discard-my-local-uncommitted-changes"></a>
### T√¥i mu·ªën b·ªè c√°c thay ƒë√¥i ch∆∞a commit tr√™n local (ƒë√£ stage v√† ch∆∞a stage)

N·∫øu b·∫°n mu·ªën b·ªè t·∫•t c·∫£ c√°c thay ƒë·ªïi ƒë√£ stage v√† ch∆∞a stage tr√™n local c·ªßa b·∫°n, b·∫°n c√≥ th·ªÉ l√†m nh∆∞ th·∫ø n√†y:

```sh
(my-branch)$ git reset --hard
# or
(master)$ git checkout -f
```

N√≥ s·∫Ω unstage t·∫•t c·∫£ c√°c file b·∫°n ƒë√£ stage v·ªõi `git add`:

```sh
$ git reset
```

N√≥ s·∫Ω revert t·∫•t c·∫£ c√°c thay ƒë·ªïi ch∆∞a commit tr√™n local (n√™n th·ª±c hi·ªán trong th∆∞ m·ª•c g·ªëc repo):

```sh
$ git checkout .
```

B·∫°n c≈©ng c√≥ th·ªÉ revert c√°c thay ƒë·ªïi ch∆∞a commit ƒë·ªëi v·ªõi m·ªôt file ho·∫∑c m·ªôt th∆∞ m·ª•c c·ª• th·ªÉ:

```sh
$ git checkout [some_dir|file.txt]
```

Tuy nhi√™n, m·ªôt c√°ch kh√°c ƒë·ªÉ revert t·∫•t c·∫£ c√°c thay ƒë·ªïi ch∆∞a commit (d√†i h∆°n ƒë·ªÉ nh·∫≠p, nh∆∞ng ho·∫°t ƒë·ªông t·ª´ b·∫•t k·ª≥ th∆∞ m·ª•c con n√†o):

```sh
$ git reset --hard HEAD
```

Thao t√°c n√†y s·∫Ω xo√° t·∫•t c·∫£ c√°c file ch∆∞a theo d√µi(untrack) tr√™n local, do ƒë√≥, ch·ªâ c√°c file ƒë√£ theo d√µi (tracked) ƒë∆∞·ª£c git gi·ªØ:

```sh
$ git clean -fd
```

`-x` c≈©ng s·∫Ω xo√° t·∫•t c·∫£ c√°c file ƒë√£ ignore.

### T√¥i mu·ªën lo·∫°i b·ªè c√°c thay ƒë·ªïi ch∆∞a stage c·ª• th·ªÉ

Khi b·∫°n mu·ªën lo·∫°i b·ªè m·ªôt s·ªë, nh∆∞ng kh√¥ng ph·∫£i t·∫•t c·∫£ c√°c thay ƒë·ªïi trong b·∫£n sao l√†m vi·ªác c·ªßa b·∫°n.

Checkout c√°c thay ƒë·ªïi kh√¥ng mong mu·ªën, gi·ªØa c√°c thay ƒë·ªïi t·ªët.

```sh
$ git checkout -p
# Answer y to all of the snippets you want to drop
```

M·ªôt c√°ch kh√°c li√™n quan ƒë·∫øn vi·ªác s·ª≠ d·ª•ng `stash`. Stash t·∫•t c·∫£ c√°c thay ƒë·ªïi t·ªët, reset b·∫£n sao l√†m vi·ªác v√† apply l·∫°i c√°c thay ƒë·ªïi t·ªët.

```sh
$ git stash -p
# Select all of the snippets you want to save
$ git reset --hard
$ git stash pop
```

Ngo√†i ra, stash nh·ªØng thay ƒë·ªïi kh√¥ng mong mu·ªën c·ªßa b·∫°n v√† sau ƒë√≥ drop stash.

```sh
$ git stash -p
# Select all of the snippets you don't want to save
$ git stash drop
```

### T√¥i mu·ªën lo·∫°i b·ªè c√°c file ch∆∞a stage c·ª• th·ªÉ

Khi b·∫°n mu·ªën lo·∫°i b·ªè m·ªôt file c·ª• th·ªÉ trong b·∫£n sao ƒëang l√†m vi·ªác c·ªßa b·∫°n.

```sh
$ git checkout myFile
```

Ngo√†i ra, d·ªÉ lo·∫°i b·ªè nhi·ªÅu file trong b·∫£n sao l√†m vi·ªác c·ªßa b·∫°n, h√£y li·ªát k√™ t·∫•t c·∫£ ch√∫ng.

```sh
$ git checkout myFirstFile mySecondFile
```

### T√¥i ch·ªâ lo·∫°i b·ªè c√°c thay ƒë·ªïi ch∆∞a stage tr√™n local

Khi b·∫°n mu·ªën lo·∫°i b·ªè t·∫•t c·∫£ c√°c thay ƒë·ªïi ch∆∞a commit m√† ch∆∞a stage tr√™n local

```sh
$ git checkout .
```
<a href="i-want-to-discard-all-my-untracked-files"></a>
### T√¥i mu·ªën lo·∫°i b·ªè t·∫•t c·∫£ c√°c file ch∆∞a ƒë∆∞·ª£c theo d√µi (track)

Khi b·∫°n mu·ªën lo·∫°i b·ªè t·∫•t c·∫£ c√°c file ch∆∞a ƒë∆∞·ª£c theo d√µi

```sh
$ git clean -f
```

<a href="I-want-to-unstage-specific-staged-file"></a>
### T√¥i mu·ªën √∫ntage m·ªôt file c·ª• th·ªÉ ƒë√£ stage

ƒê√¥i khi, ch√∫ng ta c√≥ m·ªôt ho·∫∑c nhi·ªÅu file ƒë√£ v√¥ t√¨nh b·ªã k·∫øt th√∫c v√† c√°c file n√†y ch∆∞a ƒë∆∞·ª£c commit tr∆∞·ªõc ƒë√≥. ƒê·ªÉ unstage ch√∫ng:

```sh
$ git reset -- <filename>
```

ƒêi·ªÅu n√†y d·∫´n ƒë·∫øn vi·ªác c√°c file ƒëang ch∆∞a stage v√† l√†m cho n√≥ gi·ªëng nh∆∞ ch∆∞a ƒë∆∞·ª£c theo d√µi.

## Nh√°nh

### T√¥i mu·ªën li·ªát k√™ t·∫•t c·∫£ c√°c nh√°nh

Li·ªát k√™ c√°c nhanh tr√™n local

```sh
$ git branch
```

Li·ªát k√™ c√°ch nh√°nh tr√™n remote

```sh
$ git branch -r
```

Li·ªát k√™ t·∫•t c·∫£ c√°c nh√°nh (c·∫£ local v√† remote)

```sh
$ git branch -a
```

<a name="create-branch-from-commit"></a>
### T·∫°o m·ªôt nh√°nh t·ª´ m·ªôt commit
```sh
$ git checkout -b <branch> <SHA1_OF_COMMIT>
```

<a name="pull-wrong-branch"></a>
### T√¥i ƒë√£ pull t·ª´ / v√†o sai nh√°nh

ƒê√¢y l√† m·ªôt c∆° h·ªôi kh√°c ƒë·ªÉ s·ª≠ d·ª•ng `git reflog` ƒë·ªÉ xem n∆°i con tr·ªè HEAD ƒë√£ tr·ªè tr∆∞·ªõc khi pull sai.

```sh
(master)$ git reflog
ab7555f HEAD@{0}: pull origin wrong-branch: Fast-forward
c5bc55a HEAD@{1}: checkout: checkout message goes here
```

Ch·ªâ c·∫ßn ƒë·∫∑t l·∫°i nh√°nh tr∆∞·ªõc ƒë√≥ c·ªßa b·∫°n ƒë·ªÉ commit theo mong mu·ªën:

```sh
$ git reset --hard c5bc55a
```

Xong.

<a href="discard-local-commits"></a>
### T√¥i mu·ªën lo·∫°i b·ªè c√°c commit tr√™n local ƒë·ªÉn nh√°nh c·ªßa th√¥i gi·ªëng nh∆∞ m·ªôt nh√°nh tr√™n server

X√°c nh·∫≠n r·∫±ng b·∫°n ch∆∞a push c√°c thay ƒë·ªïi c·ªßa m√¨nh ƒë·∫øn server.

`git status` s·∫Ω hi·ªÉn th·ªã s·ªë l∆∞·ª£ng c√°c commit b·∫°n ƒëang ·ªü ph√≠a tr∆∞·ªõc c·ªßa origin:

```sh
(my-branch)$ git status
# On branch my-branch
# Your branch is ahead of 'origin/my-branch' by 2 commits.
#   (use "git push" to publish your local commits)
#
```

M·ªôt c√°ch kh√°c ƒë·ªÉ reset l·∫°i ph√π h·ª£p v·ªõi origin (ƒë·ªÉ c√≥ c√°c nh√°nh gi·ªëng nh∆∞ tr√™n remote) l√† th·ª±c hi·ªán ƒëi·ªÅu n√†y:

```sh
(master)$ git reset --hard origin/my-branch
```

<a name="commit-wrong-branch"></a>
### T√¥i ƒë√£ commit ƒë·∫øn master thay v√¨ m·ªôt nh√°nh m·ªõi

T·∫°o nh√°nh m·ªõi trong khi gi·ªØ master:

```sh
(master)$ git branch my-branch
```

Reset nh√°nh master ƒë·∫øn commit tr∆∞·ªõc ƒë√≥:

```sh
(master)$ git reset --hard HEAD^
```

`HEAD^` l√† vi·∫øt t·∫Øt c·ªßa `HEAD^1`. ƒêi·ªÅu n√†y l√† vi·∫øt t·∫Øt c·ªßa parent  `HEAD`, t∆∞∆°ng t·ª± `HEAD^2` l√† vi·∫øt t·∫Øt c·ªßa parent th·ª© hai c·ªßa commit (merge c√≥ th·ªÉ c√≥ 2 parent).

Ch√∫ √Ω r·∫±ng `HEAD^2`  **kh√¥ng** gi·ªëng nh∆∞ `HEAD~2` (xem [link n√†y](http://www.paulboxley.com/blog/2011/06/git-caret-and-tilde) ƒë·ªÉ c√≥ th√™m th√¥ng tin).

Ngo√†i ra, n·∫øu b·∫°n kh√¥ng mu·ªën s·ª≠ d·ª•ng `HEAD^`, t√¨m m√£ hash c·ªßa commit ƒë·ªÉ thi·∫øt l·∫≠p nh√°nh master c·ªßa b·∫°n (`git log` l√† m·ªôt th·ªß thu·∫≠t). Sau ƒë√≥ ƒë·∫∑t l·∫°i m√£ hash. `git push` s·∫Ω ƒë·∫£m b·∫£o r·∫±ng thay ƒë·ªïi n√†y ƒë∆∞·ª£c th·ªÉ hi·ªÉn tr√™n remote c·ªßa b·∫°n.

V√≠ d·ª•, n·∫øu hash c·ªßa commit m√† nh√°nh master c·ªßa b·∫°n ƒë∆∞·ª£c cho l√†  `a13b85e`:

```sh
(master)$ git reset --hard a13b85e
HEAD is now at a13b85e
```

Checkout m·ªôt nh√°nh m·ªõi ƒë·ªÉ ti·∫øp t·ª•c l√†m vi·ªác:

```sh
(master)$ git checkout my-branch
```

<a name="keep-whole-file"></a>
### T√¥i mu·ªën gi·ªØ to√†n b·ªô file t·ª´ m·ªôt ref-ish kh√°c

Gi·∫£ s·ª≠ b·∫°n c√≥ tƒÉng ƒë·ªôt bi·∫øn m·ª©c ƒë·ªô l√†m vi·ªác (xem l∆∞u √Ω), v·ªõi h√†ng trƒÉm thay ƒë·ªïi. M·ªçi th·ª© ƒëang ho·∫°t ƒë·ªông. B√¢y gi·ªù, b·∫°n commit v√†o m·ªôt nh√°nh kh√°c ƒë·ªÉ l∆∞u c√¥ng vi·ªác ƒë√≥:

```sh
(solution)$ git add -A && git commit -m "Adding all changes from this spike into one big commit."
```

Khi b·∫°n mu·ªën ƒë·∫∑t n√≥ v√†o m·ªôt nh√°nh (c√≥ th·ªÉ feature, c√≥ th·ªÉ `develop`), b·∫°n quan t√¢m ƒë·∫øn vi·ªác gi·ªØ to√†n b·ªô file. B·∫°n mu·ªën chia commit l·ªõn c·ªßa b·∫°n th√†nh nh·ªØng c√°i nh·ªè h∆°n.

Gi·∫£ s·ª≠ b·∫°n c√≥:

  * nh√°nh `solution`, v·ªõi solution ƒë·ªÉ tƒÉng ƒë·ªôt bi·∫øn c·ªßa b·∫°n. Ph√≠a tr∆∞·ªõc `develop`.
  * nh√°nh `develop`, n∆°i b·∫°n mu·ªën th√™m c√°c thay ƒë·ªïi c·ªßa b·∫°n.

B·∫°n c√≥ th·ªÉ gi·∫£i quy·∫øt n√≥ mang n·ªôi dung ƒë·∫øn nh√°nh c·ªßa b·∫°n:

```sh
(develop)$ git checkout solution -- file1.txt
```

ƒêi·ªÅu n√†y s·∫Ω l·∫•y n·ªôi dung c·ªßa t·∫≠p tin ƒë√≥ trong nh√°nh `solution` ƒë·∫øn nh√°nh `develop` c·ªßa b·∫°n:

```sh
# On branch develop
# Your branch is up-to-date with 'origin/develop'.
# Changes to be committed:
#  (use "git reset HEAD <file>..." to unstage)
#
#        modified:   file1.txt
```

Sau ƒë√≥, commit nh∆∞ b√¨nh th∆∞·ªùng.

L∆∞u √Ω: C√°c gi·∫£i ph√°p tƒÉng ƒë·ªôt bi·∫øn ƒë∆∞·ª£c th·ª±c hi·ªán ƒë·ªÉ ph√¢n t√≠ch ho·∫∑c gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ. C√°c gi·∫£i ph√°p n√†y ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ∆∞·ªõc t√≠nh v√† lo·∫°i b·ªè sau khi m·ªçi ng∆∞·ªùi hi·ªÉu r√µ v·∫•n ƒë·ªÅ. ~ [Wikipedia](https://en.wikipedia.org/wiki/Extreme_programming_practices).

<a name="cherry-pick"></a>
### T√¥i ƒë√£ th·ª±c hi·ªán m·ªôt s·ªë commit tr√™n m·ªôt nh√°nh duy nh·∫•t n√≥ n√™n ·ªü tr√™n c√°c nh√°nh kh√°c nhau

Gi·∫£ s·ª≠ b·∫°n ƒëang ·ªü tr√™n nh√°nh master c·ªßa b·∫°n. Ch·∫°y `git log`, b·∫°n th·∫•y b·∫°n ƒë√£ th·ª±c hi·ªán 2 commit:

```sh
(master)$ git log

commit e3851e817c451cc36f2e6f3049db528415e3c114
Author: Alex Lee <alexlee@example.com>
Date:   Tue Jul 22 15:39:27 2014 -0400

    Bug #21 - Added CSRF protection

commit 5ea51731d150f7ddc4a365437931cd8be3bf3131
Author: Alex Lee <alexlee@example.com>
Date:   Tue Jul 22 15:39:12 2014 -0400

    Bug #14 - Fixed spacing on title

commit a13b85e984171c6e2a1729bb061994525f626d14
Author: Aki Rose <akirose@example.com>
Date:   Tue Jul 21 01:12:48 2014 -0400

    First commit
```

H√£y l∆∞u √Ω c√°c hash commit c·ªßa ch√∫ng ta cho m·ªói l·ªói (`e3851e8` cho #21, `5ea5173` cho #14).

Tr∆∞·ªõc ti√™n, h√£y ƒë·∫∑t l·∫°i nh√°nh master c·ªßa ch√∫ng ta v·ªÅ commit ch√≠nh x√°c (`a13b85e`):

```sh
(master)$ git reset --hard a13b85e
HEAD is now at a13b85e
```

B√¢y gi·ªù, ch√∫ng ta c√≥ th·ªÉ t·∫°o ra m·ªôt nh√°nh m·ªõi cho l·ªói c·ªßa ch√∫ng ta #21:

```sh
(master)$ git checkout -b 21
(21)$
```

B√¢y gi·ªù, h√£y *cherry-pick* commit cho bug #21 tr√™n d·∫ßu c·ªßa nh√°nh. ƒêi·ªÅu n√†y c√≥ √Ω nghƒ©a l√† ch√∫ng ta s·∫Ω √°p d·ª•ng commit ƒë√≥, v√† ch·ªâ commit ƒë√≥, tr·ª±c ti·∫øp tr√™n ƒë·∫ßu c·ªßa b·∫•t c·ª© head n√†o c·ªßa ch√∫ng ta.

```sh
(21)$ git cherry-pick e3851e8
```

T·∫°i th·ªùi ƒëi·ªÉm n√†y, c√≥ kh·∫£ nƒÉng c√≥ th·ªÉ c√≥ xung ƒë·ªôt. H√£y xem ph·∫ßn [**There were conflicts**](#merge-conflict) trong [ph·∫ßnn interactive rebasing tr√™n](#interactive-rebase) ƒë·ªÉ l√†m th·∫ø n√†o gi·∫£i quy·∫øt xung ƒë·ªôt.

B√¢y gi·ªù ch√∫ng ta h√£y t·∫°o m·ªôt nh√°nh m·ªõi cho bug # 14, c≈©ng d·ª±a tr√™n master

```sh
(21)$ git checkout master
(master)$ git checkout -b 14
(14)$
```

V√† cu·ªëi c√πng, h√£y cherry-pick commit cho bug #14:

```sh
(14)$ git cherry-pick 5ea5173
```

<a name="delete-stale-local-branches"></a>
### T√¥i mu·ªën x√≥a c√°c nh√°nh local ƒë√£ b·ªã x√≥a lu·ªìng ph√≠a tr∆∞·ªõc

Khi b·∫°n k·∫øt h·ª£p m·ªôt request pull tr√™n GitHub, n√≥ s·∫Ω cho b·∫°n t√πy ch·ªçn ƒë·ªÉ x√≥a nh√°nh ƒë√£ merge trong fork c·ªßa b·∫°n. N·∫øu b·∫°n kh√¥ng c√≥ k·∫ø ho·∫°ch ti·∫øp t·ª•c l√†m vi·ªác tr√™n nh√°nh, n√≥ s·∫°ch h∆°n n·∫øu x√≥a c√°c b·∫£n sao local c·ªßa nh√°nh, do ƒë√≥ b·∫°n kh√¥ng k·∫øt th√∫c l·ªôn x·ªôn l√™n checkout lu·ªìng l√†m vi·ªác c·ªßa b·∫°n v·ªõi r·∫•t nhi·ªÅu nh√°nh c≈©.

```sh
$ git fetch -p upstream
```

n∆°i, `upstream` l√† remote b·∫°n mu·ªën fetch t·ª´ ƒë√≥.

<a name='restore-a-deleted-branch'></a>
### T√¥i v√¥ t√¨nh x√≥a nh√°nh c·ªßa t√¥i

N·∫øu b·∫°n th∆∞·ªùng xuy√™n push l√™n remote, b·∫°n s·∫Ω an to√†n ph·∫ßn l·ªõn th·ªùi gian. Nh∆∞ng ƒë√¥i khi b·∫°n c√≥ th·ªÉ s·∫Ω x√≥a c√°c nh√°nh c·ªßa b·∫°n. Gi·∫£ s·ª≠ ch√∫ng ta t·∫°o m·ªôt nh√°nh v√† t·∫°o m·ªôt t·ªáp m·ªõi:

```sh
(master)$ git checkout -b my-branch
(my-branch)$ git branch
(my-branch)$ touch foo.txt
(my-branch)$ ls
README.md foo.txt
```

H√£y th√™m n√≥ v√† commit.

```sh
(my-branch)$ git add .
(my-branch)$ git commit -m 'foo.txt added'
(my-branch)$ foo.txt added
 1 files changed, 1 insertions(+)
 create mode 100644 foo.txt
(my-branch)$ git log

commit 4e3cd85a670ced7cc17a2b5d8d3d809ac88d5012
Author: siemiatj <siemiatj@example.com>
Date:   Wed Jul 30 00:34:10 2014 +0200

    foo.txt added

commit 69204cdf0acbab201619d95ad8295928e7f411d5
Author: Kate Hudson <katehudson@example.com>
Date:   Tue Jul 29 13:14:46 2014 -0400

    Fixes #6: Force pushing after amending commits
```

B√¢y gi·ªù ch√∫ng ta ƒëang chuy·ªÉn v·ªÅ master v√† 'v√¥ t√¨nh' x√≥a nh√°nh c·ªßa ch√∫ng ta

```sh
(my-branch)$ git checkout master
Switched to branch 'master'
Your branch is up-to-date with 'origin/master'.
(master)$ git branch -D my-branch
Deleted branch my-branch (was 4e3cd85).
(master)$ echo oh noes, deleted my branch!
oh noes, deleted my branch!
```

T·∫°i th·ªùi ƒëi·ªÉm n√†y, b·∫°n n√™n l√†m quen v·ªõi 'reflog', m·ªôt logger ƒë∆∞·ª£c n√¢ng c·∫•p. N√≥ l∆∞u tr·ªØ l·ªãch s·ª≠ c·ªßa t·∫•t c·∫£ c√°c h√†nh ƒë·ªông trong repo.

```
(master)$ git reflog
69204cd HEAD@{0}: checkout: moving from my-branch to master
4e3cd85 HEAD@{1}: commit: foo.txt added
69204cd HEAD@{2}: checkout: moving from master to my-branch
```

Nh∆∞ b·∫°n c√≥ th·ªÉ th·∫•y ch√∫ng ta ƒë√£ c√≥ commit hash t·ª´ nh√°nh ƒë√£ x√≥a c·ªßa ch√∫ng t√¥i. H√£y xem li·ªáu ch√∫ng ta c√≥ th·ªÉ kh√¥i ph·ª•c nh√°nh ƒë√£ x√≥a c·ªßa ch√∫ng ta hay kh√¥ng.

```sh
(master)$ git checkout -b my-branch-help
Switched to a new branch 'my-branch-help'
(my-branch-help)$ git reset --hard 4e3cd85
HEAD is now at 4e3cd85 foo.txt added
(my-branch-help)$ ls
README.md foo.txt
```

V√† ƒë·∫•y! Ch√∫ng ta ƒë√£ xo√° file tr∆∞·ªõc c·ªßa ch√∫ng ta. `git reflog` c≈©ng h·ªØu √≠ch khi rebase ƒëi sai l·∫ßm l·ªõn.

### T√¥i mu·ªën xo√° m·ªôt nh√°nh

ƒê·ªÉ xo√° m·ªôt nh√°nh remote:

```sh
(master)$ git push origin --delete my-branch
```

B·∫°n c≈©ng c√≥ th·ªÉ l√†m :

```sh
(master)$ git push origin :my-branch
```

ƒê·ªÉ xo√° nh√°nh local:

```sh
(master)$ git branch -d my-branch
```

ƒê·ªÉ xo√° m·ªôt nh√°nh local *kh√¥ng ƒë∆∞·ª£c* merge ƒë·∫øn nh√°nh hi·ªán t·∫°i ho·∫∑c m·ªôt upstream:

```sh
(master)$ git branch -D my-branch
```

### T√¥i mu·ªën xo√° nhi·ªÅu nh√°nh

Gi·∫£ s·ª≠ b·∫°n mu·ªën xo√° t·∫•t c·∫£ nh√°nh b·∫Øt ƒë·∫ßu v·ªõi `fix/`:

```sh
(master)$ git branch | grep 'fix/' | xargs git branch -d
```

### T√¥i mu·ªën ƒë·ªïi t√™n m·ªôt nh√°nh

ƒê·ªÉ ƒë·ªïi t√™n nh√°nh local hi·ªán t·∫°i:

```sh
(master)$ git branch -m new-name
```

ƒê·ªÉ ƒë·ªïi t√™n nh√°nh local kh√°c:

```sh
(master)$ git branch -m old-name new-name
```

<a name="i-want-to-checkout-to-a-remote-branch-that-someone-else-is-working-on"></a>
### T√îi mu·ªën checkout ƒë·∫øn m·ªôt nh√°nh remote m√† ng∆∞·ªùi kh√°c ƒëang l√†m vi·ªác tr√™n ƒë√≥

ƒê·∫ßu ti√™n, fetch t·∫•t c·∫£ nh√°nh t·ª´ remote:

```sh
(master)$ git fetch --all
```

Gi·∫£ s·ª≠ b·∫°n mu·ªën checkout sang `daves` t·ª´ remote.

```sh
(master)$ git checkout --track origin/daves
Branch daves set up to track remote branch daves from origin.
Switched to a new branch 'daves'
```

(`--track` l√† vi·∫øt t·∫Øt c·ªßa `git checkout -b [branch] [remotename]/[branch]`)

ƒêi·ªÅu n√†y s·∫Ω cung c·∫•p cho b·∫°n m·ªôt b·∫£n sao c·ª•c b·ªô c·ªßa nh√°nh `daves`, v√† m·ªçi c·∫≠p nh·∫≠t ƒë√£ ƒë∆∞·ª£c push c≈©ng s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã t·ª´ remote.

### T√¥i mu·ªën t·∫°o m·ªôt nh√°nh remte m·ªõi t·ª´ m·ªôt nh√°nh local hi·ªán t·∫°i

```sh
$ git push <remote> HEAD
```

N·∫øu b·∫°n c≈©ng mu·ªën ƒë·∫∑t nh√°nh t·ª´ remote nh∆∞ upstream cho nh√°nh hi·ªán t·∫°i, s·ª≠ d·ª•ng:

```sh
$ git push -u <remote> HEAD
```

V·ªõi ch·∫ø ƒë·ªô `upstream` v√† `simple` (m·∫∑c ƒë·ªãnh trong Git 2.0) c·ªßa c·∫•u h√¨nh `push.default`, command sau s·∫Ω push nh√°nh hi·ªán t·∫°i li√™n quan ƒë·∫øn nh√°nh remote ƒë∆∞·ª£c ƒëƒÉng k√Ω tr∆∞·ªõc ƒë√≥ v·ªõi `-u`:

```sh
$ git push
```

C√°c h√†nh ƒë·ªông kh√°c c·ªßa ch·∫ø ƒë·ªô `git push` ƒë∆∞·ª£c m√¥ t·∫£ trong [doc of `push.default`](https://git-scm.com/docs/git-config#git-config-pushdefault).

### T√¥i mu·ªën thi·∫øt l·∫≠p m·ªôt nh√°nh remote gi·ªëng nh∆∞ upstream cho m·ªôt nh√°nh local

B·∫°n c√≥ th·ªÉ thi·∫øt l·∫≠p m·ªôt nh√°nh remote nh∆∞ upstream cho nh√°nh local hi·ªán t·∫°i b·∫±ng c√°ch s·ª≠ d·ª•ng:

```sh
$ git branch --set-upstream-to [remotename]/[branch]
# or, using the shorthand:
$ git branch -u [remotename]/[branch]
```

ƒê·ªÉ thi·∫øt l·∫≠p nh√°nh upstream remote cho nh√°nh local kh√°c:

```sh
$ git branch -u [remotename]/[branch] [local-branch]
```

<a name="i-want-to-set-my-HEAD-to-track-the-default-remote-branch"></a>
### T√¥i mu·ªën thi·∫øt l·∫≠p HEAD c·ªßa t√¥i ƒë·ªÉ theo d√µi nh√°nh remote m·∫∑c ƒë·ªãnh

B·∫±ng c√°ch ki·ªÉm tra c√°c nh√°nh remote c·ªßa b·∫°n, b·∫°n c√≥ th·ªÉ th·∫•y r·∫±ng c√°c nh√°nh remote m√† HEAD c·ªßa b·∫°n ƒëang theo d√µi. Trong m·ªôt s·ªë tr∆∞·ªùng h·ª£p, ƒë√¢y kh√¥ng ph·∫£i l√† nh√°nh mong mu·ªën.

```sh
$ git branch -r
  origin/HEAD -> origin/gh-pages
  origin/master
```

ƒê·ªÉ thay ƒë·ªïi  `origin/HEAD` ƒë·ªÉ theo d√µi `origin/master`, b·∫°n c√≥ th·ªÉ ch·∫°y command n√†y:

```sh
$ git remote set-head origin --auto
origin/HEAD set to master
```

### T√¥i ƒë√£ th·ª±c hi·ªán thay ƒë·ªïi tr√™n nh√°nh sai

B·∫°n ƒë√£ th·ª±c hi·ªán c√°c thay ƒë·ªïi ch∆∞a ƒë∆∞·ª£c commit v√† nh·∫≠n ra b·∫°n ƒëang ·ªü nh√°nh sai. Stash c√°c thay ƒë·ªïi v√† apply ch√∫ng v√†o nh√°nh b·∫°n mu·ªën:

```sh
(wrong_branch)$ git stash
(wrong_branch)$ git checkout <correct_branch>
(correct_branch)$ git stash apply
```

## Rebasing v√† Merging

<a name="undo-rebase"></a>
### T√¥i mu·ªën hu·ª∑ b·ªè rebase/merge

B·∫°n c√≥ th·ªÉ ƒë√£ merge ho·∫∑c rebase nh√°nh hi·ªán t·∫°i c·ªßa b·∫°n v·ªõi m·ªôt nh√°nh sai ho·∫∑c b·∫°n kh√¥ng th·ªÉ t√¨m ra c√°ch ho√†n th√†nh qu√° tr√¨nh rebase/merge. Git l∆∞u con tr·ªè original HEAD trong m·ªôt bi·∫øn ƒë∆∞·ª£c g·ªçi l√† ORIG_HEAD tr∆∞·ªõc khi l√†m c√°c h√†nh ƒë·ªông nguy hi·ªÉm, v√¨ v·∫≠y n√≥ gi·ªëng nh∆∞ m·ªôt nh√°nh kh√¥i ph·ª•c ·ªü m·ªôt tr·∫°ng th√°i tr∆∞·ªõc khi rebase/merge.

```sh
(my-branch)$ git reset --hard ORIG_HEAD
```

<a name="force-push-rebase"></a>
### I ƒë√£ rebase, nh∆∞ng t√¥i kh√¥ng mu·ªën force push

Th·∫≠t kh√¥ng may, b·∫°n ph·∫£i b·∫Øt bu·ªôc push, n·∫øu b·∫°n mu·ªën nh·ªØng thay ƒë·ªïi ƒë√≥ ƒë∆∞·ª£c √°nh x·∫° tr√™n nh√°nh remote. ƒêi·ªÅu n√†y l√† do b·∫°n ƒë√£ thay ƒë·ªïi l·ªãch s·ª≠. Nh√°nh remote s·∫Ω kh√¥ng ch·∫•p nh·∫≠n thay ƒë·ªïi tr·ª´ khi b·∫°n √©p bu·ªôc. ƒê√¢y l√† m·ªôt trong nh·ªØng l√Ω do ch√≠nh khi·∫øn nhi·ªÅu ng∆∞·ªùi s·ª≠ d·ª•ng m·ªôt lu·ªìng merge, thay v√¨ m·ªôt lu·ªìng rebasing - c√°c nh√≥m l·ªõn c√≥ th·ªÉ g·∫∑p r·∫Øc r·ªëi v·ªõi c√°c developer b·∫Øt bu·ªôc push. S·ª≠ d·ª•ng ƒëi·ªÅu n√†y m·ªôt c√°ch th·∫≠n tr·ªçng. M·ªôt c√°ch an to√†n h∆°n ƒë·ªÉ s·ª≠ d·ª•ng rebase kh√¥ng ph·∫£i l√† ƒë·ªÉ √°nh x·∫° c√°c thay ƒë·ªïi c·ªßa b·∫°n tr√™n nh√°nh remte, v√† thay v√†o ƒë√≥ th·ª±c hi·ªán c√°c thao t√°c sau:

```sh
(master)$ git checkout my-branch
(my-branch)$ git rebase -i master
(my-branch)$ git checkout master
(master)$ git merge --ff-only my-branch
```

ƒê·ªÉ bi·∫øt th√™m h√£y xem [this SO thread](https://stackoverflow.com/questions/11058312/how-can-i-use-git-rebase-without-requiring-a-forced-push).

<a name="interactive-rebase"></a>
### T√¥i c·∫ßn k·∫øt h·ª£p c√°c commit

Gi·∫£ s·ª≠ b·∫°n ƒëang l√†m vi·ªác trong m·ªôt nh√°nh c√≥ / s·∫Ω tr·ªü th√†nh m·ªôt pull-request  tr√°i v·ªõi `master`. Trong tr∆∞·ªùng h·ª£p ƒë∆°n gi·∫£n nh·∫•t khi t·∫•t c·∫£ nh·ªØng g√¨ b·∫°n mu·ªën l√†m l√† k·∫øt h·ª£p t·∫•t c·∫£ c√°c commit th√†nh m·ªôt commit v√† b·∫°n kh√¥ng quan t√¢m ƒë·∫øn timestamo commit, b·∫°n c√≥ th·ªÉ ƒë·∫∑t l·∫°i v√† commit l·∫°i. ƒê·∫£m b·∫£o r·∫±ng nh√°nh master ƒë∆∞·ª£c c·∫≠p nh·∫≠t v√† t·∫•t c·∫£ c√°c thay ƒë·ªïi c·ªßa b·∫°n ƒë∆∞·ª£c commit, sau ƒë√≥:

```sh
(my-branch)$ git reset --soft master
(my-branch)$ git commit -am "New awesome feature"
```

N·∫øu b·∫°n mu·ªën ki·ªÉm so√°t nhi·ªÅu h∆°n, v√† c≈©ng ƒë·ªÉ b·∫£o v·ªá timestamp, b·∫°n c·∫ßn ph·∫£i l√†m  m·ªôt v√†i th·ª© ƒë∆∞·ª£c g·ªçi l√† m·ªôt interactive rebase:

```sh
(my-branch)$ git rebase -i master
```

N·∫øu b·∫°n kh√¥ng l√†m vi·ªác v·ªõi m·ªôt nh√°nh kh√°c, b·∫°n ph·∫£i rebase li√™n quan t·ªõi `HEAD` c·ªßa b·∫°n. N·∫øu b·∫°n mu·ªën squash 2 commit cu·ªëi, b·∫°n s·∫Ω ph·∫£i rebase l·∫°i `HEAD~2`. Cho commit cu·ªëi 3, `HEAD~3`,...

```sh
(master)$ git rebase -i HEAD~2
```

Sau khi b·∫°n ch·∫°y l·ªánh rebase interactive, b·∫°n s·∫Ω th·∫•y m·ªôt c√°i g√¨ ƒë√≥ nh∆∞ th·∫ø n√†y trong tr√¨nh so·∫°n th·∫£o c·ªßa b·∫°n:

```vim
pick a9c8a1d Some refactoring
pick 01b2fd8 New awesome feature
pick b729ad5 fixup
pick e3851e8 another fix

# Rebase 8074d12..b729ad5 onto 8074d12
#
# Commands:
#  p, pick = use commit
#  r, reword = use commit, but edit the commit message
#  e, edit = use commit, but stop for amending
#  s, squash = use commit, but meld into previous commit
#  f, fixup = like "squash", but discard this commit's log message
#  x, exec = run command (the rest of the line) using shell
#
# These lines can be re-ordered; they are executed from top to bottom.
#
# If you remove a line here THAT COMMIT WILL BE LOST.
#
# However, if you remove everything, the rebase will be aborted.
#
# Note that empty commits are commented out
```

T·∫•t c·∫£ c√°c d√≤ng b·∫Øt ƒë·∫ßu b·∫±ng m·ªôt `#` l√† c√°c comment, ch√∫ng s·∫Ω kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn rebase c·ªßa b·∫°n.

Sau ƒë√≥ b·∫°n thay th·ªÉ c√¢u l·ªánh `pick` v·ªõi nh·ªØng th∆∞ trong danh s√°ch tr√™n, v√† b·∫°n c≈©ng c√≥ th·ªÉ lo·∫°i b·ªè c√°c commit b·∫±ng c√°ch xo√° c√°c d√≤ng t∆∞∆°ng ·ª©ng.

V√≠ d·ª•, n·∫øu b·∫°n mu·ªënn **di chuy·ªÉn m·ªôt m√¨nh commit c≈© nh·∫•t(ƒë·∫ßu ti√™n) v√† k·∫øt v·ªõi v·ªõi t·∫•t c·∫£ commit sau v·ªõi commit c≈© th·ª© 2**, b·∫°n n√™n ch·ªânh s·ª≠a ch·ªØ c√°i b√™n c·∫°nh m·ªói commit ngo·∫°i tr·ª´ ch·ªØ c√°i ƒë·∫ßu ti√™n v√† ch·ªØ c√°i th·ª© hai `f`:

```vim
pick a9c8a1d Some refactoring
pick 01b2fd8 New awesome feature
f b729ad5 fixup
f e3851e8 another fix
```

N·∫øu b·∫°n mu·ªën k·∫øt h·ª£p c√°c commit v√† **ƒë·ªïi t√™n commit**, b·∫°n n√™n th√™m m·ªôt ch·ªØ c√°i `r` b√™n c·∫°nh commit th·ª© 2 ho·∫∑c ƒë∆°n gi·∫£n s·ª≠ d·ª•ng `s` thay v√¨ `f`:

```vim
pick a9c8a1d Some refactoring
pick 01b2fd8 New awesome feature
s b729ad5 fixup
s e3851e8 another fix
```

B·∫°n c√≥ th·ªÉ ƒë·ªïi t√™n commit sau trong ƒëo·∫°n text b·∫≠t l√™n.

```vim
Newer, awesomer features

# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
# rebase in progress; onto 8074d12
# You are currently editing a commit while rebasing branch 'master' on '8074d12'.
#
# Changes to be committed:
#   modified:   README.md
#

```

N·∫øu m·ªçi th·ª© th√†nh c√¥ng, b·∫°n s·∫Ω th·∫•y m·ªôt c√°i g√¨ ƒë√≥ nh∆∞ th·∫ø n√†y:

```sh
(master)$ Successfully rebased and updated refs/heads/master.
```

#### Chi·∫øn l·ª±c merge an to√†n
`--no-commit` th·ª±c hi·ªán merge nh∆∞ng gi·∫£ v·ªù h·ª£p nh·∫•t kh√¥ng th√†nh c√¥ng v√† kh√¥ng t·ª± ƒë·ªông, cho ph√©p ng∆∞·ªùi d√πng c√≥ c∆° h·ªôi ki·ªÉm tra v√† tinh ch·ªânh th√™m k·∫øt qu·∫£ merge tr∆∞·ªõc khi commit. `no-ff` duy tr√¨ b·∫±ng ch·ª©ng r·∫±ng m·ªôt nh√°nh t√≠nh nƒÉng ƒë√£ t·ª´ng t·ªìn t·∫°i, gi·ªØ cho l·ªãch s·ª≠ d·ª± √°n nh·∫•t qu√°n.

```sh
(master)$ git merge --no-ff --no-commit my-branch
```

#### T√¥i c·∫ßn merge m·ªôt nh√°nh v√†o m·ªôt commit duy nh·∫•t

```sh
(master)$ git merge --squash my-branch
```

<a name="rebase-unpushed-commits"></a>
#### T√¥i ch·ªâ mu·ªën k·∫øt h·ª£p c√°c commit ch∆∞a push

ƒê√¥i khi b·∫°n c√≥ m·ªôt s·ªë c√¥ng vi·ªác ƒëang ti·∫øn h√†nh commit b·∫°n mu·ªën k·∫øt h·ª£p tr∆∞·ªõc khi b·∫°n ƒë·∫©y ch√∫ng l√™n upstream. B·∫°n kh√¥ng mu·ªën v√¥ t√¨nh k·∫øt h·ª£p b·∫•t k·ª≥ commit n√†o ƒë√£ ƒë∆∞·ª£c push l√™n upstream v√¨ m·ªôt ng∆∞·ªùi kh√°c c√≥ th·ªÉ ƒë√£ th·ª±c hi·ªán c√°c commit tham chi·∫øu ƒë·∫øn ch√∫ng.

```sh
(master)$ git rebase -i @{u}
```

ƒêi·ªÅu n√†y s·∫Ω l√†m m·ªôt interactive rebase m√† ch·ªâ li·ªát k√™ c√°c commit m√† b·∫°n ch∆∞a push, v√¨ v·∫≠y n√≥ s·∫Ω ƒë∆∞·ª£c an to√†n ƒë·ªÉ s·∫Øp x·∫øp l·∫°i / s·ª≠a ch·ªØa / squash b·∫•t c·ª© ƒëi·ªÅu g√¨ trong danh s√°ch

#### T√¥i c·∫ßn hu·ª∑ vi·ªác merge

ƒê√¥i khi vi·ªác merge c√≥ th·ªÉ g√¢y ra s·ª± c·ªë trong m·ªôt s·ªë file nh·∫•t ƒë·ªãnh, trong nh·ªØng tr∆∞·ªùng h·ª£p ƒë√≥, ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng t√πy  `abort` ƒë·ªÉ h·ªßy b·ªè qu√° tr√¨nh gi·∫£i quy·∫øt xung ƒë·ªôt hi·ªán t·∫°i v√† c·ªë g·∫Øng x√¢y d·ª±ng l·∫°i tr·∫°ng th√°i merge tr∆∞·ªõc.

```sh
(my-branch)$ git merge --abort
```

L·ªánh n√†y c√≥ s·∫µn k·ªÉ t·ª´ phi√™n b·∫£n Git >= 1.7.4

### T√¥i c·∫ßn c·∫≠p nh·∫≠t commit cha c·ªßa nh√°nh c·ªßa t√¥i

Gi·∫£ s·ª≠ t√¥i c√≥ m·ªôt nh√°nh master, m·ªôt nh√°nh feature-1 t√°ch nh√°nh t·ª´ master v√† m·ªôt nh√°nh feature-2 t√°ch nh√°nh t·ª´ feature-1. N·∫øu t√¥i th·ª±c hi·ªán commit ƒë·ªëi v·ªõi feature-1, th√¨ commit c·ªßa feature-2 kh√¥ng c√≤n ch√≠nh x√°c n·ªØa (n√≥ ph·∫£i l√† ph·∫ßn ƒë·∫ßu c·ªßa feature-1, v√¨ ch√∫ng ta ƒë√£ ph√¢n nh√°nh n√≥). Ch√∫ng ta c√≥ th·ªÉ s·ª≠a ƒëi·ªÅu n√†y v·ªõi `git rebase --onto`.

```sh
(feature-2)$ git rebase --onto feature-1 <the first commit in your feature-2 branch that you don't want to bring along> feature-2
```

ƒêi·ªÅu n√†y gi√∫p trong c√°c tr∆∞·ªùng h·ª£p kh√≥ n∆°i b·∫°n c√≥ th·ªÉ c√≥ m·ªôt feature ƒë∆∞·ª£c x√¢y d·ª±ng tr√™n m·ªôt feature kh√°c ch∆∞a ƒë∆∞·ª£c merge v√† m·ªôt bugfix tr√™n nh√°nh feature-1 c·∫ßn ƒë∆∞·ª£c ph·∫£n √°nh trong nh√°nh feature-2 c·ªßa b·∫°n.

### Ki·ªÉm tra xem t·∫•t c·∫£ commit tr√™n m·ªôt nh√°nh ƒë√£ ƒë∆∞·ª£c merge

ƒê·ªÉ ki·ªÉm ch√°u t·∫•t c·∫£ commit tr√™n m·ªôt nh√°nh ƒë∆∞·ª£c merge v√†o nh√°nh kh√°c, b·∫°n n√™n diff gi·ªØa c√°c head (ho·∫∑c m·ªçi commit) c·ªßa nh·ªØng nh√°nh ƒë√≥:

```sh
(master)$ git log --graph --left-right --cherry-pick --oneline HEAD...feature/120-on-scroll
```

ƒêi·ªÅu n√†y s·∫Ω cho b·∫°n bi·∫øt n·∫øu b·∫•t k·ª≥ commit trong m·ªôt nh∆∞ng kh√¥ng ph·∫£i l√† nh√°nh kh√°c, v√† s·∫Ω cung c·∫•p cho b·∫°n m·ªôt danh s√°ch c·ªßa b·∫•t k·ª≥ nonshared gi·ªØa c√°c nh√°nh. M·ªôt l·ª±a ch·ªçn kh√°c l√† l√†m ƒëi·ªÅu n√†y:

```sh
(master)$ git log master ^feature/120-on-scroll --no-merges
```

### C√°c v·∫•n ƒë·ªÅ c√≥ th·ªÉ x·∫£y ra v·ªõi interactive rebases

<a name="noop"></a>
#### M√†n h√¨nh ch·ªânh s·ª≠a rebase cho bi·∫øt 'noop'

N·∫øu b·∫°n th·∫•y ƒëi·ªÅu n√†y:
```
noop
```

ƒêi·ªÅu n√†y c√≥ nghƒ©a b·∫°n ƒëang c·ªë rebase l·∫°i m·ªôt nh√°nh m√† l√† m·ªôt commit gi·ªëng h·ªát nhau ho·∫∑c l√† *ahead* c·ªßa nh√°nh hi·ªán t·∫°i. B·∫°n c√≥ th·ªÉ th·ª≠:

* ƒë·∫£m b·∫£o nh√°nh master c·ªßa b·∫°n l√† n∆°i n√≥ c·∫ßn
* rebase l·∫°i `HEAD~2` ho·∫∑c s·ªõm h∆°n

<a name="merge-conflict"></a>
#### C√≥ m·ªôt v√†i xung ƒë·ªôt

N·∫øu b·∫°n kh√¥ng th·ªÉ ho√†n t·∫•t th√†nh vi·ªác rebase, b·∫°n c√≥ th·ªÉ ph·∫£i gi·∫£i quy·∫øt xung ƒë·ªôt.

ƒê·∫ßu ti√™n ch·∫°y `git status` ƒë·ªÉ xem t·ªáp n√†o c√≥ xung ƒë·ªôt trong ch√∫ng:

```sh
(my-branch)$ git status
On branch my-branch
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

  both modified:   README.md
```

Trong v√≠ d·ª• ƒë√≥,, `README.md` c√≥ xung ƒë·ªôt. M·ªü t·ªáp ƒë√≥ v√† t√¨m ki·∫øm nh·ªØng ƒëi·ªÅu sau:

```vim
   <<<<<<< HEAD
   some code
   =========
   some code
   >>>>>>> new-commit
```

B·∫°n s·∫Ω c·∫ßn ph·∫£i gi·∫£i quy·∫øt s·ª± kh√°c bi·ªát gi·ªØa code ƒë√£ ƒë∆∞·ª£c th√™m v√†o trong commit m·ªõi c·ªßa b·∫°n (trong v√≠ d·ª•, m·ªçi th·ª© t·ª´ d√≤ng ·ªü gi·ªØa  `new-commit`) v√† `HEAD` c·ªßa b·∫°n.

N·∫øu b·∫°n mu·ªën gi·ªØ phi√™n b·∫£n code c·ªßa m·ªôt nh√°nh, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng `--ours` ho·∫∑c `--theirs`:

```sh
(master*)$ git checkout --ours README.md
```

- Khi *ƒëang merge*, s·ª≠ d·ª•ng `--ours` ƒë·ªÉ gi·ªØa c√°c thay ƒë·ªïi t·ª´ nh√°nh local, ho·∫∑c `--theirs` ƒë·ªÉ gi·ªØ c√°c thay ƒë·ªïi t·ª´ nh√°nh kh√°c.
- Khi *ƒëang rebase*, s·ª≠ d·ª•ng `--theirs` ƒë·ªÉ gi·ªØ c√°c thay ƒë·ªïi t·ª´ nh√°nh local, ho·∫∑c `--ours` ƒë·ªÉ gi·ªØ c√°c thay ƒë·ªïi t·ª´ nh√°nh kh√°c. ƒê·ªÉ gi·∫£i th√≠ch v·ªÅ s·ª± ho√°n ƒë·ªïi n√†y, h√£y xem [ch√∫ √Ω n√†y trong t√†i li·ªáu Git](https://git-scm.com/docs/git-rebase#git-rebase---merge).

N·∫øu vi·ªác merge ph·ª©c t·∫°p h∆°n, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng tr√¨nh ch·ªânh s·ª≠a kh√°c bi·ªát tr·ª±c quan:

```sh
(master*)$ git mergetool -t opendiff
```

Sau khi b·∫°n ƒë√£ gi·∫£i quy·∫øt t·∫•t c·∫£ xung ƒë·ªôt v√† ƒë√£ ki·ªÉm tra code c·ªßa m√¨nh, `git add` c√°c file ƒë√£ thay ƒë·ªïi v√† sau ƒë√≥ ti·∫øp t·ª•c rebase v·ªõi `git rebase --continue`

```sh
(my-branch)$ git add README.md
(my-branch)$ git rebase --continue
```

N·∫øu sau khi gi·∫£i quy·∫øt t·∫•t c·∫£ c√°c xung ƒë·ªôt b·∫°n k·∫øt th√∫c b·∫±ng m·ªôt c√¢y gi·ªëng h·ªát v·ªõi c√°i tr∆∞·ªõc khi th·ª±c hi·ªán, b·∫°n c·∫ßn `git rebase --skip` thay th·∫ø.

N·∫øu b·∫•t k·ª≥ l√∫c n√†o b·∫°n mu·ªën d·ª´ng to√†n b·ªô qu√° tr√¨nh rebase v√† quay tr·ªü l·∫°i tr·∫°ng th√°i ban ƒë·∫ßu nh√°nh c·ªßa b·∫°n, b·∫°n c√≥ th·ªÉ l√†m nh∆∞ th·∫ø n√†y:


```sh
(my-branch)$ git rebase --abort
```

<a name="stashing"></a>
## Stash

### Stash t·∫•t c·∫£ ch·ªânh s·ª≠a

ƒê·ªÉ stash t·∫•t c·∫£ c√°c ch·ªânh s·ª≠a trong th∆∞ m·ª•c l√†m vi·ªác

```sh
$ git stash
```

N·∫øu b·∫°n c≈©ng mu·ªën stash c√°c file ch∆∞a ƒë∆∞·ª£c theo d√µi, s·ª≠ d·ª•ng tu·ª≥ ch·ªçn `-u`.

```sh
$ git stash -u
```

### Stash c√°c file c·ª• th·ªÉ

ƒê·ªÉ stash ch·ªâ m·ªôt file t·ª´ th∆∞ m·ª•c l√†m vi·ªác

```sh
$ git stash push working-directory-path/filename.ext
```

ƒê·ªÉ stash nhi·ªÅu file t·ª´ th∆∞ m·ª•c l√†m vi·ªác

```sh
$ git stash push working-directory-path/filename1.ext working-directory-path/filename2.ext
```

<a name="stash-msg"></a>
### Stash v·ªõi message

```sh
$ git stash save <message>
```

<a name="stash-apply-specific"></a>
### Apply m·ªôt stash c·ª• th·ªÉ t·ª´ danh s√°ch

ƒê·∫ßu ti√™n ki·ªÉm tra danh s√°ch c√°c stash v·ªõi message s·ª≠ d·ª•ng

```sh
$ git stash list
```

Sau ƒë√≥ apply m·ªôt stash c·ª• th·ªÉ t·ª´ danh s√°ch s·ª≠ d·ª•ng

```sh
$ git stash apply "stash@{n}"
```

·ªû ƒë√¢y, 'n' cho bi·∫øt v·ªã tr√≠ c·ªßa stash trong stack. Stash tr√™n c√πng s·∫Ω l√† v·ªã tr√≠ 0.

## Finding

### T√¥i mu·ªën t√¨m m·ªôt chu·ªói trong b·∫•t k·ª≥ commit n√†o

ƒê·ªÉ t√¨m m·ªôt chu·ªói nh·∫•t ƒë·ªãnh ƒë∆∞·ª£c cho v√†o trong b·∫•t k·ª≥ commit n√†o, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng c·∫•u tr√∫c sau:

```sh
$ git log -S "string to find"
```

C√°c th√¥ng s·ªë chung:

* `--source` c√≥ nghƒ©a l√† hi·ªÉn th·ªã t√™n ref ƒë∆∞·ª£c ƒë∆∞a ra tr√™n d√≤ng l·ªánh m√† m·ªói l·∫ßn commit ƒë√£ ƒë·∫°t ƒë∆∞·ª£c.

* `--all` nghƒ©a l√† b·∫Øt ƒë·∫ßu t·ª´ m·ªçi nh√°nhmeans to start from every branch.

* `--reverse` in theo th·ª© t·ª± ng∆∞·ª£c l·∫°i, n√≥ c√≥ nghƒ©a l√† s·∫Ω hi·ªÉn th·ªã commit ƒë·∫ßu ti√™n ƒë√£ th·ª±c hi·ªán thay ƒë·ªïi.

<a name="i-want-to-find-by-author-committer"></a>
### T√¥i mu·ªën t√¨m t√°c gi√°c ho·∫∑c ng∆∞·ªùi commit

T√¨m t·∫•t c·∫£ commit t·ª´ t√°c gi·∫£ ho·∫∑c ng∆∞·ªùi commit b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng:

```sh
$ git log --author=<name or email>
$ git log --committer=<name or email>
```

H√£y nh·ªõ r·∫±ng t√°c gi·∫£ v√† ng∆∞·ªùi commit kh√¥ng gi·ªëng. `--author` l√† ng∆∞·ªùi ban ƒë·∫ßu ƒë√£ vi·∫øt code; m·∫∑t kh√°c,  `--committer`, l√† ng∆∞·ªùi ƒë√£ commit code thay m·∫∑c t√°c gi·∫£ g·ªëc.

### T√¥i mu·ªën li·ªát k√™ c√°c commit ch·ª©a c√° file c·ª• th·ªÉ

ƒê·ªÉ t√¨m t·∫•t c·∫£ c√°c commit ch∆∞a m·ªôt file c·ª• th·ªÉ b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng:

```sh
$ git log -- <path to file>
```

B·∫°n th∆∞·ªùng s·∫Ω ch·ªâ ƒë·ªãnh m·ªôt ƒë∆∞·ªùng d·∫´n ch√≠nh x√°c, nh∆∞ng b·∫°n c≈©ng c√≥ th·ªÉ s·ª≠ d·ª•ng c√°c k√Ω t·ª± ƒë·∫°i di·ªán trong ƒë∆∞·ªùng d·∫´n v√† t√™n t·ªáp:

```sh
$ git log -- **/*.js
```

Trong khi s·ª≠ d·ª•ng k√Ω t·ª± ƒë·∫°i di·ªán, n√≥ h·ªØu √≠ch ƒë·ªÉ th√¥ng b√°o `--name-status` ƒë·ªÉ xem danh s√°ch c√°c t·ªáp ƒë√£ commit:

```sh
$ git log --name-status -- **/*.js
```

### T√¨m m·ªôt tag n∆°i m·ªôt commit ƒë√£ tham chi·∫øu

ƒê·ªÉ t√¨m t·∫•t c·∫£ c√°c tag c√≥ ch·ª©a m·ªôt commit c·ª• th·ªÉ

```sh
$ git tag --contains <commitid>
```

## Submodules

<a name="clone-submodules"></a>
### Clone t·∫•t c·∫£ submodules

```sh
$ git clone --recursive git://github.com/foo/bar.git
```

N·∫øu ƒë√£ clone:

```sh
$ git submodule update --init --recursive
```

<a name="delete-submodule"></a>
### Xo√° m·ªôt submodule

T·∫°o m·ªôt submodule l√† kh√° nhanh, nh∆∞ng x√≥a ch√∫ng √≠t h∆°n nh∆∞ v·∫≠y. C√°c l·ªánh b·∫°n c·∫ßn l√†:

```sh
$ git submodule deinit submodulename
$ git rm submodulename
$ git rm --cached submodulename
$ rm -rf .git/modules/submodulename
```

## Miscellaneous Objects

### Kh√¥i ph·ª•c m·ªôt file ƒë√£ xo√°

ƒê·∫ßu ti√™n t√¨m commit n∆°i m√† l·∫ßn cu·ªëi file ƒë√£ t·ªìn t·∫°i:

```sh
$ git rev-list -n 1 HEAD -- filename
```

Sau ƒë√≥ checkout file:

```
git checkout deletingcommitid^ -- filename
```

### Xo√° tag

```sh
$ git tag -d <tag_name>
$ git push <remote> :refs/tags/<tag_name>
```

<a name="recover-tag"></a>
### Kh√¥i ph·ª•c m·ªôt tag ƒë√£ xo√°

N·∫øu b·∫°n mu·ªën kh√¥i ph·ª•c tag ƒë√£ b·ªã x√≥a, b·∫°n c√≥ th·ªÉ l√†m ƒë∆∞·ª£c v·∫≠y b·∫±ng c√°ch l√†m theo c√°c b∆∞·ªõc sau: Tr∆∞·ªõc ti√™n, b·∫°n c·∫ßn ph·∫£i t√¨m tag kh√¥ng th·ªÉ truy c·∫≠p

```sh
$ git fsck --unreachable | grep tag
```

Ghi l·∫°i m√£ hash c·ªßa tag. Sau ƒë√≥, kh√¥i ph·ª•c tag ƒë√£ x√≥a theo c√°ch sau, s·ª≠  [`git update-ref`](https://git-scm.com/docs/git-update-ref):

```sh
$ git update-ref refs/tags/<tag_name> <hash>
```

Tag c·ªßa b·∫°n b√¢y gi·ªù ƒë√£ ƒë∆∞·ª£c kh√¥i ph·ª•c.

### Deleted Patch

N·∫øu ai ƒë√≥ ƒë√£ g·ª≠i cho b·∫°n m·ªôt pull request tr√™n GitHub, nh∆∞ng sau ƒë√≥ ƒë√£ xo√° ch√∫ng tr√™n fork g·ªëc, b·∫°n s·∫Ω kh√¥ng th·ªÉ clone repository c·ªßa h·ªç ho·∫∑c s·ª≠ d·ª•ng `git am` nh∆∞ [.diff, .patch](https://github.com/blog/967-github-secrets) url kh√¥ng kh·∫£ d·ª•ng. Nh∆∞ng b·∫°n c√≥ th·ªÉ checkout ch√≠nh PR b·∫±ng c√°ch s·ª≠ d·ª•ng [GitHub's special refs](https://gist.github.com/piscisaureus/3342247). ƒê·ªÉ fetch n·ªôi dung c·ªßa PR#1 v√†o m·ªôt nh√°nh ƒë∆∞·ª£c g·ªçi l√† pr_1:

```sh
$ git fetch origin refs/pull/1/head:pr_1
From github.com:foo/bar
 * [new ref]         refs/pull/1/head -> pr_1
```

### Xu·∫•t m·ªôt repository ra m·ªôt file Zip

```sh
$ git archive --format zip --output /full/path/to/zipfile.zip master
```
### Push m·ªôt nh√°nh v√† m·ªôt tag c√≥ t√™n gi·ªëng nhau

N·∫øu c√≥ m·ªôt tag tr√™n m·ªôt remote repository m√† c√≥ t√™n gi·ªëng v·ªõi m·ªôt nh√°nh b·∫°n s·∫Ω g·∫∑p ph·∫£i l·ªói khi c·ªë push nhanh v·ªõi m·ªôt commad chu·∫©n `$ git push <remote> <branch>`.

```sh
$ git push origin <branch>
error: dst refspec same matches more than one.
error: failed to push some refs to '<git server>'
```

S·ª≠a l·ªói n√†y b·∫±ng c√°ch ch·ªâ ƒë·ªãnh b·∫°n mu·ªën ƒë·∫©y tham chi·∫øu head.

```sh
$ git push origin refs/heads/<branch-name>
```

N·∫øu b·∫°n mu·ªën ƒë·∫©y m·ªôt tag v√†o m·ªôt repository t·ª´ remote c√≥ c√πng t√™n v·ªõi m·ªôt nh√°nh, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng m·ªôt l·ªánh t∆∞∆°ng t·ª±.

```sh
$ git push origin refs/tags/<tag-name>
```

## Tracking c√°c file

<a href="i-want-to-change-a-file-names-capitalization-without-changing-the-contents-of-the-file"></a>
### T√¥i mu·ªën thay ƒë·ªïi c√°ch vi·∫øt hoa c·ªßa t√™n t·ªáp m√† kh√¥ng thay ƒë·ªïi n·ªôi dung c·ªßa t·ªáp

```sh
(master)$ git mv --force myfile MyFile
```

### T√¥i mu·ªën ghi ƒë√® l√™n c√°c t·ªáp local khi th·ª±c hi·ªán l·ªánh git pull

```sh
(master)$ git fetch --all
(master)$ git reset --hard origin/master
```

<a href="remove-from-git"></a>
### T√¥i mu·ªën x√≥a m·ªôt t·ªáp kh·ªèi Git nh∆∞ng v·∫´n gi·ªØ t·ªáp

```sh
(master)$ git rm --cached log.txt
```

### T√¥i mu·ªën revert t·ªáp v·ªÅ b·∫£n s·ª≠a ƒë·ªïi c·ª• th·ªÉ

Gi·∫£ s·ª≠ m√£ hash c·ªßa commit b·∫°n mu·ªën c5f567:

```sh
(master)$ git checkout c5f567 -- file1/to/restore file2/to/restore
```

N·∫øu b·∫°n mu·ªën revert c√°c thay ƒë·ªïi ƒë∆∞·ª£c th·ª±c hi·ªán ch·ªâ 1 commit tr∆∞·ªõc c5f567, v∆∞·ª£t qua commit hash nh∆∞ c5f567~1:

```sh
(master)$ git checkout c5f567~1 -- file1/to/restore file2/to/restore
```

### T√¥i mu·ªën li·ªát k√™ c√°c thay ƒë·ªïi c·ªßa m·ªôt t·ªáp c·ª• th·ªÉ gi·ªØa c√°c commit ho·∫∑c c√°c nh√°nh

Gi·∫£ s·ª≠ b·∫°n mu·ªën so s√°nh commit cu·ªëi c√πng v·ªõi t·ªáp t·ª´ commit c5f567:

```sh
$ git diff HEAD:path_to_file/file c5f567:path_to_file/file
```

C√πng ƒëi cho c√°c nh√°nh:

```sh
$ git diff master:path_to_file/file staging:path_to_file/file
```

### T√¥i mu·ªën Git b·ªè qua nh·ªØng thay ƒë·ªïi ƒë·ªëi v·ªõi m·ªôt t·ªáp c·ª• th·ªÉ

ƒêi·ªÅu n√†y ho·∫°t ƒë·ªông t·ªët cho c√°c m·∫´u c·∫•u h√¨nh ho·∫∑c c√°c t·ªáp kh√°c y√™u c·∫ßu th√™m th√¥ng tin ƒëƒÉng nh·∫≠p c·ª•c b·ªô m√† kh√¥ng ƒë∆∞·ª£c commit

```sh
$ git update-index --assume-unchanged file-to-ignore
```

L∆∞u √Ω r·∫±ng ƒëi·ªÅu n√†y kh√¥ng x√≥a t·ªáp kh·ªèi ki·ªÉm so√°t source - n√≥ ch·ªâ b·ªã b·ªè qua c·ª•c b·ªô. ƒê·ªÉ ho√†n t√°c thao t√°c n√†y v√† y√™u c·∫ßu Git l∆∞u √Ω c√°c thay ƒë·ªïi m·ªôt l·∫ßn n·ªØa, ƒëi·ªÅu n√†y s·∫Ω x√≥a ignore flag:

```sh
$ git update-index --no-assume-unchanged file-to-stop-ignoring
```

## C√°u h√¨nh

### T√¥i mu·ªën th√™m b√≠ danh cho m·ªôt s·ªë l·ªánh Git

Tr√™n OS X v√† Linux, file c·∫•u h√¨nh git ƒë∆∞·ª£c l∆∞u trong ```~/.gitconfig```.  T√¥i ƒë√£ th√™m m·ªôt s·ªë b√≠ danh m·∫´u m√† t√¥i s·ª≠ d·ª•ng l√†m shortcut (v√† m·ªôt s·ªë l·ªói ch√≠nh t·∫£ ph·ªï bi·∫øn c·ªßa t√¥i) trong ph·∫ßn ```[alias]``` ƒë∆∞·ª£c hi·ªÉn th·ªã nh∆∞ d∆∞·ªõi ƒë√¢y:

```vim
[alias]
    a = add
    amend = commit --amend
    c = commit
    ca = commit --amend
    ci = commit -a
    co = checkout
    d = diff
    dc = diff --changed
    ds = diff --staged
    extend = commit --amend -C HEAD
    f = fetch
    loll = log --graph --decorate --pretty=oneline --abbrev-commit
    m = merge
    one = log --pretty=oneline
    outstanding = rebase -i @{u}
    reword = commit --amend --only
    s = status
    unpushed = log @{u}
    wc = whatchanged
    wip = rebase -i @{u}
    zap = fetch -p
```

### T√¥i mu·ªën th√™m m·ªôt th∆∞ m·ª•c tr·ªëng v√†o repository c·ªßa t√¥i

B·∫°n kh√¥ng th·ªÉ! Git kh√¥ng h·ªó tr·ª£ ƒëi·ªÅu n√†y, nh∆∞ng c√≥ m·ªôt c√°ch hack. B·∫°n c√≥ th·ªÉ t·∫°o t·ªáp .gitignore trong th∆∞ m·ª•c v·ªõi c√°c n·ªôi dung sau:

```
 # Ignore everything in this directory
 *
 # Except this file
 !.gitignore
```

M·ªôt quy ∆∞·ªõc chung kh√°c l√† t·∫°o m·ªôt t·ªáp tr·ªëng trong th∆∞ m·ª•c c√≥ ti√™u ƒë·ªÅ .gitkeep.


```sh
$ mkdir mydir
$ touch mydir/.gitkeep
```

B·∫°n c≈©ng c√≥ th·ªÉ ƒë·∫∑t t√™n t·ªáp l√† .keep, trong tr∆∞·ªùng h·ª£p d√≤ng th·ª© hai ·ªü tr√™n s·∫Ω ```touch mydir/.keep```

### T√¥i mu·ªën cache m·ªôt username v√† password cho m·ªôt repository

B·∫°n c√≥ th·ªÉ c√≥ m·ªôt repository y√™u c·∫ßu x√°c th·ª±c.  Trong tr∆∞·ªùng h·ª£p n√†y b·∫°n c√≥ th·ªÉ cache m·ªôt username v√† password v√¨ v·∫≠y b·∫°n kh√¥ng ph·∫£i nh·∫≠p n√≥ v√†o m·ªói l·∫ßn push / pull. Vi·ªác x√°c th·ª±c c√≥ th·ªÉ l√†m ƒëi·ªÅu n√†y cho b·∫°n. 

```sh
$ git config --global credential.helper cache
# Set git to use the credential memory cache
```

```sh
$ git config --global credential.helper 'cache --timeout=3600'
# Set the cache to timeout after 1 hour (setting is in seconds)
```

### T√¥i mu·ªën l√†m cho Git b·ªè qua c√°c quy·ªÅn v√† thay ƒë·ªïi v·ªÅ filemode

```sh
$ git config core.fileMode false
```

N·∫øu b·∫°n mu·ªën ƒë·∫∑t h√†nh vi n√†y l√† h√†nh vi m·∫∑c ƒë·ªãnh cho ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng nh·∫≠p, th√¨ h√£y s·ª≠ d·ª•ng:

```sh
$ git config --global core.fileMode false
```

### T√¥i mu·ªën ƒë·∫∑t user to√†n c·ª•c

ƒê·ªÉ c·∫•u h√¨nh th√¥ng tin ng∆∞·ªùi d√πng ƒë∆∞·ª£c s·ª≠ d·ª•ng tr√™n t·∫•t c·∫£ c√°c repository c·ª•c b·ªô v√† ƒë·ªÉ ƒë·∫∑t t√™n c√≥ th·ªÉ nh·∫≠n d·∫°ng khi xem l·∫°i phi√™n b·∫£n l·ªãch s·ª≠:

```sh
$ git config --global user.name ‚Äú[firstname lastname]‚Äù
```
ƒê·ªÉ ƒë·∫∑t ƒë·ªãa ch·ªâ email s·∫Ω ƒë∆∞·ª£c li√™n k·∫øt v·ªõi m·ªói ƒëi·ªÉm ƒë√°nh d·∫•u l·ªãch s·ª≠:

```sh
git config --global user.email ‚Äú[valid-email]‚Äù
```

### T√¥i mu·ªën th√™m m√†u cho command Git

ƒê·ªÉ thi·∫øt l·∫≠p m√†u command t·ª± ƒë·ªông cho Git ƒë·ªÉ d·ªÖ d√†ng xem l·∫°i:

```sh
$ git config --global color.ui auto
```

## T√¥i kh√¥ng nghƒ© m√¨nh ƒë√£ l√†m g√¨ sai

V√¨ v·∫≠y, b·∫°n ƒëang say - b·∫°n `reset` v√†i th·ª©, ho·∫∑c b·∫°n merge sai nh√°nh, ho·∫∑c b·∫°n force push v√† b√¢y gi·ªù b·∫°n kh√¥ng th·ªÉ t√¨m th·∫•y c√°c commit c·ªßa b·∫°n. B·∫°n bi·∫øt, t·∫°i m·ªôt s·ªë th·ªùi ƒëi·ªÉm, b·∫°n ƒë√£ l√†m t·ªët, v√† b·∫°n mu·ªën quay tr·ªü l·∫°i tr·∫°ng th√°i b·∫°n ƒëang ·ªü ƒë√≥.

ƒê√¢y l√† nh·ªØng g√¨ `git reflog` cho. `reflog` theo d√µi b·∫•t k·ª≥ thay ƒë·ªïi n√†o ƒë·ªëi v·ªõi m·∫πo c·ªßa nh√°nh, ngay c·∫£ khi m·∫πo ƒë√≥ kh√¥ng ƒë∆∞·ª£c tham chi·∫øu b·ªüi nh√°nh ho·∫∑c tag. V·ªÅ c∆° b·∫£n, m·ªói l·∫ßn HEAD thay ƒë·ªïi, m·ªôt m·ª•c m·ªõi ƒë∆∞·ª£c th√™m v√†o reflog. ƒêi·ªÅu n√†y ch·ªâ ho·∫°t ƒë·ªông ƒë·ªëi v·ªõi c√°c repository c·ª•c b·ªô, th·∫≠t ƒë√°ng bu·ªìn, v√† n√≥ ch·ªâ theo d√µi c√°c chuy·ªÉn ƒë·ªông (v√≠ d·ª•: kh√¥ng thay ƒë·ªïi m·ªôt t·ªáp kh√¥ng ƒë∆∞·ª£c ghi ·ªü b·∫•t k·ª≥ ƒë√¢u).

```sh
(master)$ git reflog
0a2e358 HEAD@{0}: reset: moving to HEAD~2
0254ea7 HEAD@{1}: checkout: moving from 2.2 to master
c10f740 HEAD@{2}: checkout: moving from master to 2.2
```

C√°c reflog ·ªü tr√™n cho th·∫•y m·ªôt checkout t·ª´ master ƒë·∫øn nh√°nh 2.2 v√† tr·ªü l·∫°i. T·ª´ ƒë√≥, c√≥ m·ªôt thi·∫øt l·∫≠p c·ª©ng ƒë·ªÉ m·ªôt commit c≈© h∆°n. Ho·∫°t ƒë·ªông m·ªõi nh·∫•t ƒë∆∞·ª£c th·ªÉ hi·ªán ·ªü ƒë·∫ßu ƒë∆∞·ª£c g·∫Øn nh√£n `HEAD@{0}`.

N·∫øu n√≥ ch·ªâ ra r·∫±ng b·∫°n v√¥ t√¨nh di chuy·ªÉn tr·ªü l·∫°i, c√°c reflog s·∫Ω ch·ª©a commit master ch·ªâ ƒë·∫øn (0254ea7) tr∆∞·ªõc khi b·∫°n v√¥ t√¨nh gi·∫£m 2 commit

If it turns out that you accidentally moved back, the reflog will contain the commit master pointed to (0254ea7) before you accidentally dropped 2 commits.

```sh
$ git reset --hard 0254ea7
```

S·ª≠ d·ª•ng `git reset` sau ƒë√≥ n√≥ c√≥ th·ªÉ thay ƒë·ªïi master tr·ªü v·ªÅ commit tr∆∞·ªõc ƒë√≥. ƒêi·ªÅu n√†y cung c·∫•p s·ª± an to√†n trong tr∆∞·ªùng h·ª£p l·ªãch s·ª≠ ƒë√£ v√¥ t√¨nh thay ƒë·ªïi.

(ƒë√£ sao ch√©p v√† ch·ªânh s·ª≠a t·ª´ [Source](https://www.atlassian.com/git/tutorials/rewriting-history/git-reflog)).

# T√†i nguy√™n kh√°c

## Books

* [Learn Enough Git to Be Dangerous](https://www.learnenough.com/git-tutorial) - A book by Michael Hartl covering Git from basics
* [Pro Git](https://git-scm.com/book/en/v2) - Scott Chacon and Ben Straub's excellent book about Git
* [Git Internals](https://github.com/pluralsight/git-internals-pdf) - Scott Chacon's other excellent book about Git

## Tutorials

* [19 Git Tips For Everyday Use](https://www.alexkras.com/19-git-tips-for-everyday-use) - A list of useful Git one liners
* [Atlassian's Git tutorial](https://www.atlassian.com/git/tutorials) Get Git right with tutorials from beginner to advanced.
* [Learn Git branching](https://learngitbranching.js.org/) An interactive web based branching/merging/rebasing tutorial
* [Getting solid at Git rebase vs. merge](https://medium.com/@porteneuve/getting-solid-at-git-rebase-vs-merge-4fa1a48c53aa)
* [Git Commands and Best Practices Cheat Sheet](https://zeroturnaround.com/rebellabs/git-commands-and-best-practices-cheat-sheet) - A Git cheat sheet in a blog post with more explanations
* [Git from the inside out](https://codewords.recurse.com/issues/two/git-from-the-inside-out) - A tutorial that dives into Git's internals
* [git-workflow](https://github.com/asmeurer/git-workflow) - [Aaron Meurer](https://github.com/asmeurer)'s howto on using Git to contribute to open source repositories
* [GitHub as a workflow](https://hugogiraudel.com/2015/08/13/github-as-a-workflow/) - An interesting take on using GitHub as a workflow, particularly with empty PRs
* [Githug](https://github.com/Gazler/githug) - A game to learn more common Git workflows

## Scripts and Tools

* [firstaidgit.io](http://firstaidgit.io/) A searchable selection of the most frequently asked Git questions
* [git-extra-commands](https://github.com/unixorn/git-extra-commands) - a collection of useful extra Git scripts
* [git-extras](https://github.com/tj/git-extras) - GIT utilities -- repo summary, repl, changelog population, author commit percentages and more
* [git-fire](https://github.com/qw3rtman/git-fire) - git-fire is a Git plugin that helps in the event of an emergency by adding all current files, committing, and pushing to a new branch (to prevent merge conflicts).
* [git-tips](https://github.com/git-tips/tips) - Small Git tips
* [git-town](https://github.com/Originate/git-town) - Generic, high-level Git workflow support! http://www.git-town.com

## GUI Clients
* [GitKraken](https://www.gitkraken.com/) - The downright luxurious Git client,for Windows, Mac & Linux
* [git-cola](https://git-cola.github.io/) - another Git client for Windows and OS X
* [GitUp](https://github.com/git-up/GitUp) - A newish GUI that has some very opinionated ways of dealing with Git's complications
* [gitx-dev](https://rowanj.github.io/gitx/) - another graphical Git client for OS X
* [Sourcetree](https://www.sourcetreeapp.com/) - Simplicity meets power in a beautiful and free Git GUI. For Windows and Mac.
* [Tower](https://www.git-tower.com/) - graphical Git client for OS X (paid)
* [tig](https://jonas.github.io/tig/) - terminal text-mode interface for Git
* [Magit](https://magit.vc/) - Interface to Git implemented as an Emacs package.
* [GitExtensions](https://github.com/gitextensions/gitextensions) - a shell extension, a Visual Studio 2010-2015 plugin and a standalone Git repository tool.
* [Fork](https://git-fork.com/) - a fast and friendly Git client for Mac (beta)
* [gmaster](https://gmaster.io/) - a Git client for Windows that has 3-way merge, analyze refactors, semantic diff and merge (beta)
* [gitk](https://git-scm.com/docs/gitk) - a Git client for linux to allow simple view of repo state.
* [SublimeMerge](https://www.sublimemerge.com/) - Blazing fast, extensible client that provides 3-way merges, powerful search and syntax highlighting, in active development.
